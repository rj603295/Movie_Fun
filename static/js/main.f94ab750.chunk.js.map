{"version":3,"sources":["WebAPI.js","context.js","utils.js","components/Header.js","components/Carousel/Carousel.js","components/Rating.js","components/RatingLoading/ZZ5H.gif","components/RatingLoading/RatingLoading.js","components/Movie.js","components/Person.js","components/Loading/giphy.gif","components/Loading/Loading.js","components/Comments.js","pages/HomePage/HomePage.js","pages/MovieDetailPage/MovieDetailPage.js","pages/SearchGenrePage/SearchGenrePage.js","pages/SearchPage/SearchPage.js","pages/CreditPage/CreditPage.js","pages/LoginPage/LoginPage.js","pages/RegisterPage/RegisterPage.js","pages/MemberPage/MemberPage.js","pages/AboutPage/AboutPage.js","config.js","components/Footer.js","App.js","reportWebVitals.js","index.js"],"names":["getMovieRating","id","fetch","then","res","json","getIMDBID","getSearchData","value","page","getMovieDeatil","getTrend","getGenre","getGenreSearch","getPeopleDetail","AuthContext","createContext","getUserDeviceType","navigator","userAgent","match","HeaderContainer","styled","div","Brand","Link","NavbarList","Nav","props","$active","Wrapper","Search","SearchIcon","button","HamList","Header","isHide","location","useLocation","history","useHistory","useState","search","setSearch","isHamOpen","setIsHamOpen","isHamSearchOpen","setIsHamSearchOpen","useContext","user","setUser","userDevice","useRef","useEffect","current","handleKeyPressSearch","e","key","push","handleValueChange","target","handleLogout","auth","getAuth","signOut","catch","error","style","top","onClick","pathname","window","scrollTo","to","className","onChange","onKeyPress","placeholder","icon","faSearch","faUserCircle","preventDefault","faBars","right","React","memo","prevProps","nextProps","Item","children","CAROUSEL_ITEM","Carousel","cols","gap","currentPage","setCurrentPage","startX","startY","endX","endY","itemList","Children","toArray","filter","child","type","displayName","itemSetList","reduce","result","item","i","length","Math","ceil","handlePrev","useCallback","p","handleNext","onTouchEnd","X","Y","console","log","abs","handleTouchEnd","onTouchMove","touches","pageX","pageY","handleTouchMove","onTouchStart","handleTouchStart","hidden","gridTemplateColumns","left","gridColumnGap","map","set","display","gridGap","RatingList","Score","span","Rating","Ratings","logoWidth","IMDB","tomatoes","Metacritic","Source","Value","alt","src","Container","ImgContainer","Loading","isLoading","loadingImg","MovieContainer","RatingListRow","Heart","Movie","movie","rating","isRating","isRatingLoading","imgUrl","poster_path","userFavorite","db","getDatabase","keysArr","Object","keys","backgroundImage","includes","toString","runTransaction","ref","uid","checkData","onValue","snapshot","data","val","obj","faCheck","faPlus","CreditName","Person","person","isName","profile_path","name","CommentContainer","isMobileDevice","TitleWrapper","ThumbWrapper","Date","Thumb","TitleSection","column","RWDS_column","ButtonSection","TitleAndDate","TitleMargin","EditButton","Content","Comments","comment","handleCommentOpen","isPosterOpen","isThumbsUpOpen","setMovie","isEdit","setIsEdit","titleValue","setTitleValue","contentValue","setContentValue","thumbsUpUsers","thumbs_up_user","movie_id","handleThumbsUp","thumbs_up","title","handleTitleValue","display_name","date","content","confirm","faThumbsUp","handleContentValue","update","Title","h2","CarouselConatiner","Section","RecommendationSection","Recommedation","RecommendationTitle","RecommedationContent","RecommedationRating","PopularSection","TypeSection","UpcommingSection","SubTitle","HotPeopleSection","HotCommentsSection","Credits","credits","HomePage","movies","setMovies","setRating","trend","setTrend","upcomming","setUpcomming","genres","setGenre","hotPeople","setHotPeople","hotComments","setHotComments","setIsLoading","a","imdbId","results","sort","b","popularity","trendData","err","imdb_id","ratingArr","prevState","getFirstHotMovie","genreArr","mostThumbsUpPosts","query","orderByValue","limitToFirst","keyArr","arr","IMDBIDArr","Promise","all","assign","getPopularMovieRating","backgroundColor","backdrop_path","overview","index","genre","LeftContainer","RightContainer","DetailContainer","Recommendations","RecommendImgContainer","MovieDetailContent","ul","MovieVideoSection","MovieImgSection","MovieImg","img","Keyword","CommentSection","Pagination","AddCommentSection","AddCommentColumn","NoComment","MovieDetailPage","recommendations","setRecommendations","setCredits","director","setDirector","video","setVideo","images","setImages","comments","setComments","commentTitle","setcommentTitle","commentContent","setcommentContent","isCommentInputOpen","setisCommentInputOpen","currentCommentPage","setCurrentCommentPage","totalCommentPage","settotalCommentPage","useParams","options","buttons","showNextButton","showPrevButton","thumbnails","showThumbnails","posts","orderByChild","equalTo","len","totalPage","reverse","getComments","useColor","crossOrigin","quality","backgroundMask","colorStr","str","red","green","blue","getVideo","videoArr","getSimilar","getCredits","crew","job","cast","getMovieImage","imgArr","backdrops","handleCommentPage","isNextPage","color","release_date","substr","runtime","homepage","keywords","border","file_path","allow","allowFullScreen","frameBorder","Today","month","day","getMonth","getDate","getFullYear","createdAt","getTime","providerData","writeUserData","alert","ResultContainer","TypeTitle","PageContainer","ItemContainer","SearchGenrePage","setTotalPage","total_pages","getMoviesRatings","handlePageChange","ContentContainer","ClassificationList","NotFoundMessage","Filter","li","People","known_for","SearchMovie","SearchPage","searchItemGenreID","setsearchItemGenreID","currentType","setCurrentType","allCount","movieCount","peopleCount","typesCount","settypesCount","isTypeListOpen","setIsTypeListOpen","currentGenre","setCurrentGenre","forEach","media_type","genre_ids","genreID","find","itemID","ratingTempArr","getSearchMovieRating","arr2","nodeName","dataset","handleCurrentType","handleCurrentGenre","genreFilter","some","PersonContainer","PersonContent","FamousMovieSection","Biography","LanguageButton","CreditPage","setPerson","biography","setBiography","biographyLang","setBiographyLang","famousMovie","setfamousMovie","otherMovie","setotherMovie","getPeopleMovies","slice","handleBioLanguage","language","getPeopleDetailEng","birthday","place_of_birth","LoginSection","ErrorMessage","LoginPage","username","setUsername","password","setPassword","errorMessage","setErrorMessage","handleLogin","setPersistence","browserLocalPersistence","signInWithEmailAndPassword","userCredential","currentUser","errorCode","code","handleKeyPressLogin","RegisterPage","nickname","setNickname","handleRegister","createUserWithEmailAndPassword","updateProfile","handleKeyPressRegister","MemberDetailSection","FavoriteMovieSection","FavoriteContainer","PhoneSection","PersonalCommentSection","MemberPage","favoriteID","setFavoriteID","favoriteMovie","setFavoriteMovie","personalComments","setPersonalComments","isNicknameEdit","setIsNicknameEdit","nicknameValue","setNicknameValue","memberFavoriteRef","fetchData","handleNicknameInputOpen","email","emailVerified","handleNicknameInputChange","trim","AboutSection","LogoSection","AboutPage","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","FooterContainer","BrandSection","Footer","href","rel","faGithub","faFacebook","faInstagram","faTwitter","faYoutube","faCopyright","App","setIsHide","setUserFavorite","lastScrollY","initializeApp","onAuthStateChanged","addEventListener","st","scrollY","handleScroll","movieRef","getFavorite","Provider","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f94ab750.chunk.js","sourcesContent":["export const getPopular = () => fetch('https://api.themoviedb.org/3/movie/popular?api_key=2be0c0fc4fb985246d2226af126346c2&language=en-US&region=TW&page=1')\r\n  .then((res) => res.json())\r\n\r\nexport const getMovieRating = (id) => fetch(`https://www.omdbapi.com/?i=${id}&apikey=2edf5c13&tomatoes=true`)\r\n  .then((res) => res.json())\r\n\r\nexport const getIMDBID = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/external_ids?api_key=2be0c0fc4fb985246d2226af126346c2`)\r\n  .then((res) => res.json())\r\n\r\nexport const getSearchData = (value, page = 1) => fetch(`https://api.themoviedb.org/3/search/multi?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW&query=${value}&page=${page}`)\r\n  .then((res) => res.json())\r\n\r\nexport const getMovieDeatil = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW&append_to_response=keywords,external_ids`)\r\n  .then((res) => res.json())\r\n\r\nexport const getRecommendations = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/recommendations?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW`)\r\n  .then((res) => res.json())\r\n\r\nexport const getSimilar = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/similar?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW`)\r\n  .then((res) => res.json())\r\n\r\nexport const getCredits = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW`)\r\n  .then((res) => res.json())\r\n\r\nexport const getTrend = () => fetch('https://api.themoviedb.org/3/trending/movie/week?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW')\r\n  .then((res) => res.json())\r\n\r\nexport const getGenre = () => fetch('https://api.themoviedb.org/3/genre/movie/list?api_key=2be0c0fc4fb985246d2226af126346c2&language=en-US')\r\n  .then((res) => res.json())\r\n\r\nexport const getGenreSearch = (id, page = 1) => fetch(`https://api.themoviedb.org/3/discover/movie?api_key=2be0c0fc4fb985246d2226af126346c2&language=en-US&region=TW&with_genres=${id}&page=${page}`)\r\n  .then((res) => res.json())\r\n\r\nexport const getUpcomming = () => fetch('https://api.themoviedb.org/3/movie/upcoming?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW&region=TW,US')\r\n  .then((res) => res.json())\r\n\r\nexport const getPopularPeople = () => fetch('https://api.themoviedb.org/3/person/popular?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW')\r\n  .then((res) => res.json())\r\n\r\nexport const getVideo = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=2be0c0fc4fb985246d2226af126346c2`)\r\n  .then((res) => res.json())\r\n\r\nexport const getPeopleDetail = (id) => fetch(`https://api.themoviedb.org/3/person/${id}?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW&append_to_response=images,tagged_images`)\r\n  .then((res) => res.json())\r\n\r\nexport const getPeopleDetailEng = (id) => fetch(`https://api.themoviedb.org/3/person/${id}?api_key=2be0c0fc4fb985246d2226af126346c2&language=en-US`)\r\n  .then((res) => res.json())\r\n\r\nexport const getPeopleMovies = (id) => fetch(`https://api.themoviedb.org/3/person/${id}/movie_credits?api_key=2be0c0fc4fb985246d2226af126346c2&language=zh-TW`)\r\n  .then((res) => res.json())\r\n\r\nexport const getMovieImage = (id) => fetch(`https://api.themoviedb.org/3/movie/${id}/images?api_key=2be0c0fc4fb985246d2226af126346c2`)\r\n  .then((res) => res.json())\r\n","import { createContext } from 'react'\r\n\r\nconst AuthContext = createContext(null)\r\nexport { AuthContext as default }\n","const TOKEN_NAME = 'token'\r\nexport const setAuthToken = (token) => {\r\n  localStorage.setItem(TOKEN_NAME, token)\r\n}\r\nexport const getAuthToken = () => localStorage.getItem(TOKEN_NAME)\r\n\r\nexport const getDate = () => {\r\n  const Today = new Date()\r\n  const doubleMonth = ['10', '11', '12']\r\n  const oddDate = ['1', '2', '3', '4', '5', '6', '7', '8', '9']\r\n  let month = ''\r\n  let day = ''\r\n  if (!doubleMonth.includes((Today.getMonth() + 1).toString())) {\r\n    month = '0' + (Today.getMonth() + 1).toString()\r\n  } else {\r\n    month = (Today.getMonth() + 1).toString()\r\n  }\r\n  if (oddDate.includes((Today.getDate()).toString())) {\r\n    day = '0' + (Today.getDate()).toString()\r\n  } else {\r\n    day = (Today.getDate()).toString()\r\n  }\r\n  return Today.getFullYear().toString() + month + day\r\n}\r\nexport const getCreatedAt = () => {\r\n  const Today = new Date()\r\n  return Today.getTime()\r\n}\r\nexport const getUserDeviceType = () => {\r\n  if (navigator.userAgent.match(/Android/i) ||\r\n navigator.userAgent.match(/webOS/i) ||\r\n navigator.userAgent.match(/iPhone/i) ||\r\n navigator.userAgent.match(/iPad/i) ||\r\n navigator.userAgent.match(/iPod/i) ||\r\n navigator.userAgent.match(/BlackBerry/i) ||\r\n navigator.userAgent.match(/Windows Phone/i)\r\n  ) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n","import React, { useContext, useEffect, useState, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link, useLocation, useHistory } from 'react-router-dom'\r\nimport { getSearchData } from '../WebAPI'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch, faUserCircle, faBars } from '@fortawesome/free-solid-svg-icons'\r\nimport { getAuth, signOut } from 'firebase/auth'\r\nimport AuthContext from '../context'\r\nimport { getUserDeviceType } from '../utils.js'\r\n\r\nconst HeaderContainer = styled.div`\r\n  align-items: center;\r\n  height: auto;\r\n  background-color: white;\r\n  width: 100%;\r\n  padding-top: 20px;\r\n  color: white;\r\n  position: fixed;\r\n  top: 0;\r\n  z-index: 99;\r\n  background: transparent;\r\n  transition: all .4s ease-in-out;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n\r\n  @media (max-width: 415px) {\r\n    .RWD-S{\r\n      display: block;\r\n    } \r\n  }\r\n`\r\nconst Brand = styled(Link)`\r\n  display: block;\r\n  font-size: 1.1rem;\r\n  font-weight: bold;\r\n  text-decoration: none;\r\n  color: white;\r\n  @media (max-width: 415px) {\r\n    font-size: 2.5rem;\r\n    margin-left: 20px; \r\n  }\r\n`\r\nconst NavbarList = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100%;\r\n  width: 30%;\r\n  color: white;\r\n  .ham{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n   .ham{\r\n     display: inline-block;\r\n   }\r\n   .RWD-L{\r\n     display: none;\r\n   }\r\n  }\r\n`\r\nconst Nav = styled(Link)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  width: 30%;\r\n  cursor: pointer;\r\n  color: white;\r\n  text-decoration: none;\r\n  font-size: 0.47rem;\r\n  ${(props) => props.$active &&\r\n  `\r\n    background: rgba(0, 0, 0, 0.1)\r\n  `}\r\n  @media (max-width: 415px) {\r\n    font-size: 2.5rem;\r\n    width: 50%;\r\n  }\r\n`\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  max-width: 80%;\r\n  margin: 0 auto;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  @media (max-width: 415px) {\r\n    max-width: 95%;\r\n    .RWD-L{\r\n      display: none;\r\n    } \r\n  }\r\n`\r\nconst Search = styled.div`\r\n  position: relative;\r\n  width: 30%;\r\n  input{\r\n    display: block;\r\n    height: 60%;\r\n    border-radius: 30px;\r\n    outline: none;\r\n    padding: 3% 0;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    font-size: 0.5rem;\r\n    text-indent: 10px;\r\n  }\r\n  input, textarea {\r\n\r\n    font-size: initial;\r\n    \r\n    }\r\n  @media (max-width: 415px) {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    input{\r\n      color: white;\r\n      background: transparent;\r\n      border: none;\r\n      border-bottom: 1px solid white;\r\n      border-radius: 0;\r\n    }\r\n    input::placeholder{\r\n      color: white;\r\n    }\r\n  }\r\n`\r\nconst SearchIcon = styled.button`\r\n  font-size: 0.5rem;\r\n  position: absolute;\r\n  right: 2%;\r\n  top:50%;\r\n  transform: translateY(-50%);\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  @media (max-width: 415px) {\r\n    position: static;\r\n    color: white;\r\n    font-size: 2rem;\r\n    .RWD-S{\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      height: 100%;\r\n    }\r\n  }\r\n`\r\nconst HamList = styled.div`\r\n  text-align: center;\r\n  position: absolute;\r\n  right: 2%;\r\n  margin-top: 3%;\r\n  text-align: center;\r\n  transition: all 0.5s ease-in;\r\n  border-radius: 10px;\r\n  background: white;\r\n  display: none;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 25%;\r\n  a{\r\n    display: block;\r\n    color: black;\r\n    font-size: 0.5rem;\r\n    margin: 5% 0;\r\n    svg{\r\n      font-size: 1.5rem;\r\n    }\r\n  }\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    display: flex;\r\n    color: black;\r\n    a{\r\n      font-size: 14px;\r\n    }\r\n\r\n    .RWD-S{\r\n      display: block;\r\n    } \r\n  }\r\n`\r\nfunction Header ({ isHide }) {\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const [search, setSearch] = useState('')\r\n  const [isHamOpen, setIsHamOpen] = useState(false)\r\n  const [isHamSearchOpen, setIsHamSearchOpen] = useState(false)\r\n  const { user, setUser } = useContext(AuthContext)\r\n  const userDevice = useRef()\r\n\r\n  useEffect(() => {\r\n    userDevice.current = getUserDeviceType()\r\n  }, [])\r\n\r\n  const handleKeyPressSearch = (e) => {\r\n    if (e.key === 'Enter') {\r\n      setSearch('')\r\n      getSearchData(search).then(() => {\r\n        history.push(`/search/movie/${search}`)\r\n      })\r\n      setIsHamSearchOpen(false)\r\n    }\r\n  }\r\n  const handleSearch = () => {\r\n    setSearch('')\r\n    getSearchData(search).then(() => {\r\n      history.push(`/search/movie/${search}`)\r\n    })\r\n  }\r\n  const handleValueChange = (e) => {\r\n    setSearch(e.target.value)\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    const auth = getAuth()\r\n    signOut(auth).then(() => {\r\n      setUser(null)\r\n      // Sign-out successful.\r\n    }).catch((error) => {\r\n      return error\r\n      // An error happened.\r\n    })\r\n  }\r\n  const handleSearchIconOpen = (e) => {\r\n    e.preventDefault()\r\n    setIsHamOpen(false)\r\n    setIsHamSearchOpen(!isHamSearchOpen)\r\n  }\r\n  const handleHamListOpen = (e) => {\r\n    e.preventDefault()\r\n    setIsHamOpen(!isHamOpen)\r\n    setIsHamSearchOpen(false)\r\n  }\r\n  const handleToTop = () => {\r\n    if (location.pathname === '/') {\r\n      window.scrollTo(0, 0)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (isHide === true) {\r\n      setIsHamOpen(false)\r\n    }\r\n  }, [isHide])\r\n  return (\r\n    <HeaderContainer style={ !userDevice.current ? { top: isHide ? '-200px' : '0px' } : { top: '0px' } }>\r\n      <Wrapper>\r\n        <Brand onClick={ handleToTop } to=\"/\">Fun電影</Brand>\r\n        <Search className=\"RWD-L\">\r\n          <input onChange={ (e) => { handleValueChange(e) } } onKeyPress={ (e) => { handleKeyPressSearch(e) } } placeholder=\"搜尋您想要的電影, 人物....\" value={ search }></input>\r\n          <SearchIcon onClick={ handleSearch } ><FontAwesomeIcon icon={ faSearch } /></SearchIcon>\r\n        </Search>\r\n        <NavbarList>\r\n          <Nav $active={ location.pathname === '/about' } className=\"RWD-L\" to=\"/about\">about</Nav>\r\n          {!user && <Nav className=\"RWD-L\" to=\"/login\" >登入</Nav>}\r\n          {user && <Nav className=\"RWD-L\" onClick={ handleLogout } to=\"/login\">登出</Nav>}\r\n          <Nav className=\"RWD-L\" to=\"/member\"><FontAwesomeIcon icon={ faUserCircle } /></Nav>\r\n          <Nav className=\"RWD-S\" onClick={ handleSearchIconOpen } to=\"\"><FontAwesomeIcon icon={ faSearch } /></Nav>\r\n          <Nav className=\"ham\" onClick={ handleHamListOpen } to=\"\"><FontAwesomeIcon icon={ faBars } /></Nav>\r\n        </NavbarList>\r\n      </Wrapper>\r\n\r\n      <HamList style={ { right: isHamOpen ? '1%' : '-200px' } }>\r\n        {!user && <Nav to=\"/login\" >登入</Nav>}\r\n        {user && <Nav onClick={ handleLogout } to=\"/login\">登出</Nav>}\r\n        <Nav to=\"/member\" ><FontAwesomeIcon icon={ faUserCircle } /></Nav>\r\n        <Nav $active={ location.pathname === '/about' } to=\"/about\">about</Nav>\r\n      </HamList>\r\n      <Search className=\"RWD-S\">\r\n        {isHamSearchOpen && <input onChange={ (e) => { handleValueChange(e) } } onKeyPress={ (e) => { handleKeyPressSearch(e) } } placeholder=\"搜尋您想要的電影, 人物....\" value={ search }></input>}\r\n        {/* {!isHamSearchOpen && <SearchIcon onClick={() => {setIsHamSearchOpen(!isHamSearchOpen)}}><FontAwesomeIcon icon={faSearch} /></SearchIcon> }    */}\r\n      </Search>\r\n      {/* </RWDSRightSection> */}\r\n\r\n    </HeaderContainer>\r\n  )\r\n}\r\n\r\nexport default React.memo(Header, (prevProps, nextProps) => {\r\n  if (prevProps.isHide !== nextProps.isHide) {\r\n    return false // re-render\r\n  }\r\n  return true // 不會 Re-render\r\n})\r\n","import React, { useState, useCallback } from 'react'\r\nimport './Carousel.css'\r\n\r\nconst Item = ({ children }) => <div>{children}</div>\r\n\r\nconst CAROUSEL_ITEM = 'CAROUSEL_ITEM'\r\nconst Carousel = ({ cols = 1, gap = 10, children }) => {\r\n  const [currentPage, setCurrentPage] = useState(0)\r\n\r\n  // const [startX, setStartX] = useState(0)\r\n  // const [startY, setStartY] = useState(0)\r\n  // const [endX, setEndX] = useState(0)\r\n  // const [endY, setEndY] = useState(0)\r\n\r\n  // let startX = useRef(0)\r\n  // let startY = useRef(0)\r\n  // let endX = useRef(0)\r\n  // let endY = useRef(0)\r\n\r\n  let startX = 0\r\n  let startY = 0\r\n  let endX = 0\r\n  let endY = 0\r\n\r\n  const itemList = React.Children.toArray(children).filter(\r\n    child => child.type.displayName === CAROUSEL_ITEM\r\n  )\r\n\r\n  const itemSetList = itemList.reduce((result, item, i) => {\r\n    if (i % cols === 0) {\r\n      result.push([<Item key={ i }>{item}</Item>])\r\n    } else {\r\n      result[result.length - 1].push(<Item key={ i }>{item}</Item>)\r\n    }\r\n\r\n    return result\r\n  }, [])\r\n\r\n  const page = Math.ceil(itemList.length / cols)\r\n\r\n  const handlePrev = useCallback(() => {\r\n    setCurrentPage(p => p - 1)\r\n  }, [])\r\n\r\n  const handleNext = useCallback(() => {\r\n    setCurrentPage(p => p + 1)\r\n  }, [])\r\n\r\n  //  自己改Start\r\n  const handleTouchStart = (e) => {\r\n    startX = e.touches[0].pageX\r\n    startY = e.touches[0].pageY\r\n  }\r\n  const handleTouchMove = (e) => {\r\n    console.log('move', e.touches[0].pageX)\r\n    endX = e.touches[0].pageX\r\n    endY = e.touches[0].pageY\r\n  }\r\n  const handleTouchEnd = () => {\r\n    const X = endX - startX\r\n    const Y = endY - startY\r\n    console.log('X', X)\r\n    if (X > 0 && Math.abs(X) > Math.abs(Y)) {\r\n      // 向右\r\n      if (currentPage > 0) {\r\n        setCurrentPage(p => p - 1)\r\n      }\r\n\r\n      console.log('向右')\r\n    } else if (X < 0 && Math.abs(X) > Math.abs(Y)) {\r\n      // 向左\r\n      console.log('向左')\r\n      if (currentPage !== page - 1) {\r\n        setCurrentPage(p => p + 1)\r\n      }\n    } else if (Y > 0 && Math.abs(Y) > Math.abs(X)) {\r\n      // 向下\r\n      console.log('向下')\r\n    } else if (Y < 0 && Math.abs(Y) > Math.abs(X)) {\r\n      // 向上\r\n      console.log('向上')\r\n    } else {\r\n      // 没有\r\n      console.log('没有')\r\n    }\r\n  }\r\n  // 自己改End\r\n  return (\r\n    <div className=\"Carousel\" onTouchEnd={ (e) => handleTouchEnd(e) } onTouchMove={ e => handleTouchMove(e) } onTouchStart={ (e) => handleTouchStart(e) }>\r\n      <span\r\n        className=\"Carousel__btn--prev\"\r\n        hidden={ currentPage <= 0 }\r\n        onClick={ handlePrev }\r\n      />\r\n      <div className=\"Carousel__railWrapper\">\r\n        <div\r\n          className=\"Carousel__rail\"\r\n          style={ {\r\n            gridTemplateColumns: `repeat(${page}, 100%)`,\r\n            left: `calc(${-100 * currentPage}% - ${gap * currentPage}px)`,\r\n            gridColumnGap: `${gap}px`\r\n          } }\r\n        >\r\n          {itemSetList.map((set, i) => (\r\n            <div\r\n              className=\"Carousel__ItemSet\"\r\n              key={ i }\r\n              style={ {\r\n                display: 'grid',\r\n                gridTemplateColumns: `repeat(${cols}, 1fr)`,\r\n                gridGap: `${gap}px`\r\n              } }\r\n            >\r\n              {set}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <span\r\n        className=\"Carousel__btn--next\"\r\n        hidden={ currentPage === page - 1 }\r\n        onClick={ handleNext }\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nCarousel.Item = ({ children }) => children\r\nCarousel.Item.displayName = CAROUSEL_ITEM\r\nexport default Carousel\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst RatingList = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 30% 30% 30%;\r\n  align-items: end;\r\n  list-style-type:none;\r\n  li{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-right: 2%;\r\n    img{\r\n      margin: 0 auto;\r\n    }\r\n    .logo{\r\n      width: 60%;\r\n    }\r\n    .T_logo{\r\n      padding: 6%;\r\n    }\r\n    .M_logo{\r\n      padding: 8%;\r\n    }\r\n  }\r\n  @media (max-width: 415px) {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: cetner;\r\n    li{\r\n      .logo{\r\n        width: 50%;\r\n      }\r\n      .T_logo{\r\n        padding: 3%;\r\n      }\r\n      .M_logo{\r\n        padding: 5%;\r\n      }\r\n    }\r\n\r\n  }\r\n`\r\nconst Score = styled.span`\r\n  display: inline-block;\r\n  font-size: 18px;\r\n`\r\n\r\nexport default function Rating ({ Ratings, logoWidth = '75px' }) {\n  let IMDB = ''\r\n  let tomatoes = ''\r\n  let Metacritic = ''\r\n  if (Ratings) {\r\n    for (let i = 0; i < Ratings.length; i++) {\r\n      if (Ratings[i].Source === 'Internet Movie Database') {\r\n        IMDB = Ratings[i].Value\r\n      }\r\n      if (Ratings[i].Source === 'Rotten Tomatoes') {\r\n        tomatoes = Ratings[i].Value\r\n      }\r\n      if (Ratings[i].Source === 'Metacritic') {\r\n        Metacritic = Ratings[i].Value\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <RatingList logoWidth={ logoWidth }>\r\n      <li><div className=\"logo\"><img alt=\"\" className=\"logo I_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/69/IMDB_Logo_2016.svg\" /></div><Score>{IMDB !== '' ? IMDB : 'None'}</Score></li>\r\n      <li><div className=\"logo\"><img alt=\"\" className=\"logo T_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/6f/Rotten_Tomatoes_logo.svg\" /></div><Score>{tomatoes !== '' ? tomatoes : 'None'}</Score></li>\r\n      <li><div className=\"logo\"><img alt=\"\" className=\"logo M_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/48/Metacritic_logo.svg\" /></div><Score>{Metacritic !== '' ? Metacritic : 'None'}</Score></li>\r\n    </RatingList>\r\n  )\r\n}\n","export default __webpack_public_path__ + \"static/media/ZZ5H.a1a99674.gif\";","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport loadingImg from './ZZ5H.gif'\r\n\r\nconst Container = styled.div`\r\n  background: rgba(255, 255, 255, 1);\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  z-index: 99999;\r\n  img{\r\n    height: 30px;\r\n    width: 30px;\r\n  }\r\n`\r\nconst ImgContainer = styled.div`\r\n  position: absolute;\r\n  top:40%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`\r\nexport default function Loading ({ isLoading = false }) {\n  return (\r\n    <div>\r\n      {isLoading && <Container>\r\n        <ImgContainer>\r\n          <img alt=\"\" src={ loadingImg } />\r\n        </ImgContainer>\r\n      </Container>}\r\n    </div>\r\n\r\n  )\r\n}\n","import React, { useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPlus, faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport AuthContext from '../context'\r\nimport {\r\n  getDatabase,\r\n  ref,\r\n  onValue,\r\n  set,\r\n  runTransaction\r\n} from 'firebase/database'\r\nimport RatingLoading from './RatingLoading'\r\n\r\nconst MovieContainer = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`\r\nconst ImgContainer = styled(Link)`\r\n  display: flex;\r\n  height: auto;\r\n  width: 100%; \r\n  align-items: end;\r\n  justify-content: end;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  position: relative;\r\n  padding: 80.63% 0;\r\n`\r\nconst RatingListRow = styled.div`\r\n  text-align: left;\r\n  background: white;\r\n  color: black;\r\n  list-style: none;\r\n  border-radius: 5px;\r\n  border: 3px solid grey;\r\n  font-size: 0.5rem;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 30%;\r\n  margin-right: 0;\r\n  .logo{\r\n    width: 30%;\r\n  }\r\n  .I_logo{\r\n    padding: 8%;\r\n  }\r\n  li{\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  @media (max-width: 1200px) {\r\n    width: 45%;\r\n  }\r\n  @media (max-width: 415px) {\r\n    width: 55%;\r\n    margin-right: 0;\r\n    font-size: 14px;\r\n    .logo{\r\n      width: 30%;\r\n    }\r\n  }\r\n`\r\nconst Heart = styled.div`\r\n  svg{\r\n    display: block;\r\n    color: white;\r\n    font-weight: bold;\r\n    font-size: 1rem;\r\n    box-sizing: border-box;\r\n    position: absolute;\r\n    top: 1%;\r\n    right: 1%;\r\n    background: grey;\r\n    border: 3px solid grey;\r\n    border-radius: 50%;\r\n  }\r\n  &:hover{\r\n    \r\n  }\r\n  @media (max-width: 815px) {\r\n    svg{\r\n      font-size: 1.7rem\r\n    }\r\n  }\r\n  @media (max-width: 415px) {\r\n    svg{\r\n      font-size: 3.5rem\r\n    }\r\n  }\r\n`\r\nconst Score = styled.span`\r\n  display: inline-block;\r\n  font-size: 12px;\r\n`\r\nfunction Movie ({\r\n  movie,\r\n  rating,\r\n  isRating = false,\r\n  isRatingLoading = false\n}) {\n  const imgUrl = `https://image.tmdb.org/t/p/w500${movie.poster_path}`\r\n  const id = movie.id\r\n  const { user } = useContext(AuthContext)\r\n  const { userFavorite } = useContext(AuthContext)\r\n  const db = getDatabase()\r\n  let keysArr = []\r\n  if ((userFavorite !== null) && (Object.keys(userFavorite).length !== 0)) {\r\n    keysArr = Object.keys(userFavorite)\r\n  }\r\n  let IMDB = ''\r\n  let tomatoes = ''\r\n  let Metacritic = ''\r\n  if (rating) {\r\n    for (let i = 0; i < rating.length; i++) {\r\n      if (rating[i].Source === 'Internet Movie Database') {\r\n        IMDB = rating[i].Value\r\n      }\r\n      if (rating[i].Source === 'Rotten Tomatoes') {\r\n        tomatoes = rating[i].Value\r\n      }\r\n      if (rating[i].Source === 'Metacritic') {\r\n        Metacritic = rating[i].Value\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleFavoriteMovie = (e) => {\r\n    e.preventDefault()\r\n    // let favoriteMovieIdArr = Object.keys(userFavorite)\r\n    if (user && keysArr.includes(id.toString())) {\r\n      runTransaction(ref(db, 'favorite/' + user.uid), (movie) => {\r\n        console.log('hello1')\r\n        if (movie) {\r\n          movie[`${id}`] = null\r\n        }\r\n        return movie\r\n      })\r\n    } else if (user && !keysArr.includes(id.toString())) {\r\n      let checkData\r\n      onValue(ref(db, 'favorite/' + user.uid), (snapshot) => {\r\n        const data = snapshot.val()\r\n        checkData = data\r\n      })\r\n      if (!checkData) {\r\n        const obj = {}\r\n        obj[`${id}`] = 1\r\n        set(ref(db, 'favorite/' + user.uid), obj)\r\n      } else {\r\n        runTransaction(ref(db, 'favorite/' + user.uid), (movie) => {\r\n          if (movie) {\r\n            if (keysArr.length === 0) {\r\n              movie[`${id}`] = {}\r\n            }\r\n            movie[`${id}`] = 1\r\n          }\r\n          return movie\r\n        })\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <MovieContainer>\r\n      <ImgContainer\r\n        style={ { backgroundImage: movie.poster_path ? `url(\"${imgUrl}\")` : 'url(\"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg\")' } } to={ `/movie/${id}` }\n      >\r\n        {user &&\r\n        <Heart onClick={ handleFavoriteMovie }>\r\n          {keysArr.includes(id.toString()) ? <FontAwesomeIcon icon={ faCheck } /> : <FontAwesomeIcon icon={ faPlus } />}\r\n        </Heart>}\r\n        {isRating &&\r\n        <RatingListRow>\r\n          <RatingLoading isLoading={ isRatingLoading } />\r\n          <li><img alt=\"\" className=\"logo I_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/69/IMDB_Logo_2016.svg\" /><Score>{IMDB !== '' ? IMDB : 'None'}</Score></li>\r\n          <li><img alt=\"\" className=\"logo T_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/6f/Rotten_Tomatoes_logo.svg\" /><Score>{tomatoes !== '' ? tomatoes : 'None'}</Score></li>\r\n          <li><img alt=\"\" className=\"logo M_logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/48/Metacritic_logo.svg\" /><Score>{Metacritic !== '' ? Metacritic : 'None'}</Score></li>\r\n        </RatingListRow>}\r\n      </ImgContainer>\r\n    </MovieContainer>\r\n  )\r\n}\r\n\r\nexport default React.memo(Movie, (prevProps, nextProps) => {\n  if (prevProps.isRatingLoading !== nextProps.isRatingLoading) {\r\n    return false // re-render\r\n  }\r\n  return true // 不會 Re-render\r\n})\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst ImgContainer = styled(Link)`\r\n  display: inline-block;\r\n  width: 100%;\r\n  padding: 70% 0;\r\n  margin-right: 5%;\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  @media (max-width: 415px) {\r\n    \r\n  }\r\n`\r\nconst CreditName = styled.p`\r\n  color: white;\r\n  font-size: 0.5rem;\r\n  @media(max-width: 415px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\nexport default function Person ({ person, isName = true }) {\r\n  return (\r\n    <div>\r\n      <ImgContainer\n        style={ {\r\n          backgroundImage: person.profile_path ? `url(\"https://image.tmdb.org/t/p/w500${person.profile_path}\")` : 'url(\"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg\")'\r\n        } } to={ `/credit/${person.id}` }\n      >\r\n      </ImgContainer>\r\n      {isName && <CreditName>{person.name}</CreditName>}\r\n    </div>\r\n\r\n  )\r\n}\n","export default __webpack_public_path__ + \"static/media/giphy.4d579986.gif\";","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport loadingImg from './giphy.gif'\r\n\r\nconst Container = styled.div`\r\n  background: rgba(0, 0, 0, 0.95);\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  z-index: 99999;\r\n  img{\r\n    height: 150px;\r\n    width: 150px;\r\n  }\r\n`\r\nconst ImgContainer = styled.div`\r\n  position: absolute;\r\n  top:40%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`\r\nexport default function Loading ({ isLoading = true }) {\r\n  return (\r\n    <div>\r\n      {isLoading && <Container>\r\n        <ImgContainer>\r\n          <img alt=\"\" src={ loadingImg } />\r\n        </ImgContainer>\r\n      </Container>}\r\n    </div>\r\n\r\n  )\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useHistory, Link } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faThumbsUp } from '@fortawesome/free-solid-svg-icons'\r\nimport AuthContext from '../context'\r\nimport { getDatabase, ref, runTransaction, update, set } from 'firebase/database'\r\nimport { getMovieDeatil } from '../WebAPI'\r\nimport { getUserDeviceType } from '../utils'\r\n\r\nconst CommentContainer = styled.div`\r\n  min-width: 70%;\r\n  margin: 0 auto;\r\n  p{\r\n    text-align: left;\r\n  }\r\n  margin-bottom: 40px;\r\n  textarea{\r\n    width: 85%;\r\n    height: 100px;\r\n    margin-top: 20px;\r\n  }\r\n  input, textarea{\r\n    font-size: ${props => props.isMobileDevice ? 'initial' : ''}\r\n  }\r\n  @media (max-width: 415px) {\r\n    min-width: 85%;\r\n\r\n  }\r\n`\r\nconst TitleWrapper = styled.div`\r\n\r\n  h2{\r\n    cursor: pointer;\r\n  }\r\n  @media (max-width: 415px) {\r\n    display: block;\r\n    \r\n  }\r\n`\r\nconst ThumbWrapper = styled.div`\r\n  font-size: 0.5rem;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  @media (max-width: 813px) {\r\n\r\n    font-size: 0.8rem\r\n  }\r\n  @media (max-width: 415px) {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 2rem;\r\n  }\r\n`\r\nconst Date = styled.span`\r\n  \r\n`\r\nconst Thumb = styled.span`\r\n  cursor: pointer;\r\n  display: block;\r\n  border: 3px solid #acb9cc;\r\n  box-sizing: border-box;\r\n  border-radius: 8px;\r\n  padding: 8% 0;\r\n  width: 100%;\r\n  &:hover{\r\n    background: #edf0f9;\r\n    color: black;\r\n  }\r\n  @media (max-width: 415px) {\r\n    padding: 8% 2%;\r\n  }\r\n`\r\nconst TitleSection = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 0.4rem;\r\n  display: grid;\r\n  grid-template-columns: ${props => props.column};\r\n  button{\r\n    margin-right: 20px;\r\n  }\r\n  h2{\r\n    display: -webkit-box;\r\n    overflow:hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    -webkit-line-clamp: 4;\r\n    -webkit-box-orient: vertical;\r\n    white-space: normal;\r\n  }\r\n  @media (max-width: 415px) {\r\n    font-size: 14px;\r\n    display: grid;\r\n    grid-template-columns: ${props => props.RWDS_column};\r\n  }\r\n`\r\nconst ImgContainer = styled(Link)`\r\n  display: block;\r\n  width: 200px;\r\n  height: 100px;\r\n  width: 100%;\r\n  height: auto;\r\n  padding: 68% 0;\r\n\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  @media (max-width: 415px) {\r\n    width: 100%;\r\n  }\r\n`\r\nconst ButtonSection = styled.div`\r\n@media (max-width: 415px) {\r\n  \r\n}\r\n`\r\nconst TitleAndDate = styled.div`\r\n  text-align: left;\r\n  margin-left: ${props => props.TitleMargin};\r\n  span{\r\n    display: inline-block;\r\n    font-size: 12px;\r\n  }\r\n  h2{\r\n    margin-bottom: 5%;\r\n  }\r\n  input{\r\n    display: block;\r\n  }\r\n`\r\nconst EditButton = styled.div`\r\n  margin-top: 3%;\r\n`\r\nconst Content = styled.p`\r\n  font-size: 0.4rem;\r\n  margin: 0 auto;\r\n  margin-top: 4%;\r\n  line-height: 1.5;\r\n  @media (max-width: 415px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\nexport default function Comments ({ comment, handleCommentOpen, isPosterOpen = false, isThumbsUpOpen = true }) {\r\n  const { user } = useContext(AuthContext)\r\n  const history = useHistory()\r\n  const [movie, setMovie] = useState(null)\r\n  const [isEdit, setIsEdit] = useState(false)\r\n  const [titleValue, setTitleValue] = useState('')\r\n  const [contentValue, setContentValue] = useState('')\r\n  let thumbsUpUsers = []\r\n\r\n  if (comment.thumbs_up_user) {\r\n    thumbsUpUsers = Object.keys(comment.thumbs_up_user)\r\n  }\r\n  useEffect(() => {\r\n    getMovieDeatil(comment.movie_id).then((res) => {\r\n      setMovie(res)\r\n    })\r\n  }, [comment.movie_id])\r\n\r\n  const handleThumbsUp = () => {\r\n    const db = getDatabase()\r\n    if (!user) {\r\n      history.push('/login')\r\n    }\r\n    if (user && thumbsUpUsers.includes(user.uid)) {\r\n      runTransaction(ref(db, 'comments/' + comment.id), (comment) => {\r\n        if (comment) {\r\n          comment.thumbs_up--\r\n          comment.thumbs_up_user[user.uid] = null\r\n        }\r\n        return comment\r\n      })\r\n    } else if (user && !thumbsUpUsers.includes(user.uid)) {\r\n      runTransaction(ref(db, 'comments/' + comment.id), (comment) => {\r\n        if (comment) {\r\n          comment.thumbs_up++\r\n          if (thumbsUpUsers.length === 0) {\r\n            comment.thumbs_up_user = {}\r\n          }\r\n          comment.thumbs_up_user[user.uid] = 1\r\n        }\r\n        return comment\r\n      })\r\n    }\r\n  }\r\n  const handleTitleValue = (e) => {\r\n    setTitleValue(e.target.value)\r\n  }\r\n  const handleContentValue = (e) => {\r\n    setContentValue(e.target.value)\r\n  }\r\n  const handleEditComment = () => {\r\n    setIsEdit(true)\r\n    setTitleValue(comment.title)\r\n    setContentValue(comment.content)\r\n  }\r\n  const handleEditCommentCancel = () => {\r\n    setIsEdit(false)\r\n    setTitleValue('')\r\n    setContentValue('')\r\n  }\r\n  const handleCommentSubmit = () => {\r\n    const db = getDatabase()\r\n    update(ref(db, 'comments/' + comment.id), {\r\n      title: titleValue,\r\n      content: contentValue\r\n    })\r\n    setIsEdit(false)\r\n  }\r\n  const handleDeleteComment = () => {\r\n    const db = getDatabase()\r\n    if (window.confirm('確定要刪除留言？')) {\r\n      set(ref(db, 'comments/' + comment.id), {})\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CommentContainer isMobileDevice={ getUserDeviceType() }>\r\n      <TitleWrapper>\r\n        <TitleSection RWDS_column={ isPosterOpen ? '20% 65% 15%' : '80% 20%' } column={ isPosterOpen ? '10% 80% 10%' : '90% 10%' } >\r\n          {isPosterOpen && movie &&\r\n            <ImgContainer style={ { backgroundImage: `url('https://image.tmdb.org/t/p/w500${movie.poster_path}')` } } to={ `movie/${comment.movie_id}` }></ImgContainer>}\r\n          <TitleAndDate TitleMargin={ isPosterOpen ? '10%' : '0' }>\r\n            {!isEdit && <h2 onClick={ () => handleCommentOpen(comment.id) }>{comment.title}</h2>}\r\n            {isEdit && <input onChange={ (e) => { handleTitleValue(e) } } type=\"text\" value={ titleValue } />}\r\n            <span><span>{comment.display_name}</span> －發布於<Date>{comment.date}</Date></span>\r\n            {user &&\r\n              (user.uid === comment.uid\r\n                ? <EditButton>\r\n                  <button onClick={ handleEditComment }>編輯</button>\r\n                  <button onClick={ handleDeleteComment }>刪除</button>\r\n                </EditButton>\r\n                : false)\r\n              }\r\n          </TitleAndDate>\r\n          <ThumbWrapper>\r\n            {isThumbsUpOpen && (user && thumbsUpUsers.includes(user.uid)\r\n              ? <Thumb className=\"thumbs_up\" onClick={ handleThumbsUp }><FontAwesomeIcon icon={ faThumbsUp } /> {comment.thumbs_up}</Thumb>\r\n              : <Thumb onClick={ handleThumbsUp }><FontAwesomeIcon icon={ faThumbsUp } /> {comment.thumbs_up}</Thumb>)}\r\n          </ThumbWrapper>\r\n        </TitleSection>\r\n      </TitleWrapper>\r\n      {!comment.isHide && !isEdit && <Content>{comment.content}</Content>}\r\n      {isEdit && <textarea onChange={ (e) => { handleContentValue(e) } } type=\"text\" value={ contentValue } />}\r\n      {isEdit &&\r\n      <ButtonSection>\r\n        <button onClick={ handleCommentSubmit }>確定</button>\r\n        <button onClick={ handleEditCommentCancel }>取消</button>\r\n        </ButtonSection>\r\n        }\r\n    </CommentContainer>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport {\r\n  getPopular,\r\n  getMovieRating,\r\n  getIMDBID,\r\n  getTrend,\r\n  getGenre,\r\n  getUpcomming,\r\n  getPopularPeople\r\n} from '../../WebAPI'\r\nimport {\r\n  getDatabase,\r\n  ref,\r\n  query,\r\n  orderByValue,\r\n  onValue,\r\n  limitToFirst\r\n} from 'firebase/database'\r\nimport Carousel from '../../components/Carousel'\r\nimport RatingList from '../../components/Rating'\r\nimport Movie from '../../components/Movie'\r\nimport Person from '../../components/Person'\r\nimport Loading from '../../components/Loading'\r\nimport Comment from '../../components/Comments'\r\n\r\nconst Title = styled.h2`\r\n  font-size: 5rem;\r\n  color: rgb(224, 222, 222);\r\n  margin: 0;\r\n  padding: 3% 0;\r\n}\r\n`\r\nconst MovieContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  width: 100%;\r\n  z-index: 999;\r\n  top: 70%;\r\n  height: 100%;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    top: 0;\r\n    height: 60%;\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n  }\r\n`\r\nconst CarouselConatiner = styled.div`\r\n  max-width: 95%;\r\n  width: 100%;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  background: #1C1C1C;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    top: 0;\r\n    height: 60%;\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n  }\r\n`\r\nconst Section = styled.div`\r\n  position: relative;\r\n`\r\nconst RecommendationSection = styled.div`\r\n  height:100vh;\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  position: relative;\r\n  width: 100vw;\r\n  @media (max-width: 415px) {\r\n    width: 100%;\r\n  }\r\n`\r\nconst Recommedation = styled.div`\r\n  color: white;\r\n  position: absolute;\r\n  top: 30%;\r\n  left: 10%;\r\n  @media (max-width: 415px) {\r\n    top:60%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 90%;\r\n  }\r\n`\r\nconst RecommendationTitle = styled.h2`\r\n  font-size: 2rem;\r\n  text-align: left;\r\n  margin-bottom: 1%;\r\n  @media (max-width: 415px) {\r\n    text-align: center;\r\n    font-size: 4rem;\r\n  }\r\n`\r\nconst RecommedationContent = styled.p`\r\n  text-align: left;\r\n  font-size: 0.5rem;\r\n  width: 50%;\r\n  margin-bottom: 1%;\r\n  line-height: 1.5;\r\n  @media (max-width: 415px) {\r\n    display: none;\r\n  }\r\n`\r\nconst RecommedationRating = styled.div`\r\n  width: 50%;\r\n  @media (max-width: 415px) {\r\n    margin: 0 auto;\r\n  }\r\n`\r\nconst PopularSection = styled.div`\r\n  position: relative;\r\n\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    min-height: 200px;\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n  }\r\n`\r\nconst TypeSection = styled.div`\r\n  color: white;\r\n  display: flex;\r\n  list-style: none;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  a{\r\n    display: block;\r\n    width: 16%;\r\n    margin-right: 1%;\r\n    margin-bottom: 1%;\r\n    border: 1px solid white;\r\n    padding: 2% 0px;\r\n    box-sizing: border-box;\r\n    border-radius: 8px;\r\n    color: white;\r\n    text-decoration: none;\r\n\r\n    background-size: cover;\r\n    background-position: center;\r\n  }\r\n  @media (max-width: 415px) {\r\n    font-size: 14px;\r\n    a{width: 27%;}\r\n  }\r\n \r\n`\r\nconst UpcommingSection = styled.div`\r\n\r\n`\r\nconst SubTitle = styled.p`\r\n  color: white;\r\n`\r\nconst HotPeopleSection = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\nconst HotCommentsSection = styled.div`\r\n  color: white;\r\n  padding-bottom: 20px;\r\n  margin: 0 auto;\r\n  margin-top: 40px;\r\n  width: 60%;\r\n  @media (max-width: 415px) {\r\n    width: 85%;\r\n  }\r\n`\r\nfunction Credits ({ credits }) {\r\n  return (\r\n    <CarouselConatiner>\r\n      <div className=\"RWD-L\">\r\n        <Carousel cols={ 6 } gap={ 3 }>\r\n          {credits.map((item) =>\r\n            <Carousel.Item key={ item.id }>\r\n              {item.profile_path !== 'null' &&\r\n              <div>\r\n                <Person person={ item } />\r\n              </div>}\r\n            </Carousel.Item>\r\n          )}\r\n        </Carousel>\r\n      </div>\r\n      <div className=\"RWD-S\">\r\n        <Carousel cols={ 3 } gap={ 3 }>\r\n          {credits.map((item) =>\r\n            <Carousel.Item key={ item.id }>\r\n              {item.profile_path !== 'null' &&\r\n              <div>\r\n                <Person person={ item } />\r\n              </div>}\r\n            </Carousel.Item>\r\n          )}\r\n        </Carousel>\r\n      </div>\r\n\r\n    </CarouselConatiner>\r\n  )\r\n}\r\nexport default function HomePage () {\r\n  const [movies, setMovies] = useState([])\r\n  const [Rating, setRating] = useState([])\r\n  const [trend, setTrend] = useState([])\r\n  const [upcomming, setUpcomming] = useState([])\r\n  const [genres, setGenre] = useState([])\r\n  const [hotPeople, setHotPeople] = useState([])\r\n  const [hotComments, setHotComments] = useState([])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  // const [isRatingLoading, setIsRatingLoading] = useState(Array(20).fill(true))\r\n\r\n  // 初始化\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    // 取得首頁單一電影\r\n    async function getFirstHotMovie () {\r\n      let imdbId = ''\r\n      let trendData\r\n      // setIsLoading(true)\r\n      await getTrend().then((res) => {\r\n        const data = res.results.sort(function (a, b) {\r\n          return b.popularity - a.popularity\r\n        })\r\n        setTrend(data[0])\r\n        trendData = data[0]\r\n      }).catch((err) => {\r\n        return err\r\n      })\r\n      await getIMDBID(trendData.id).then((res) => {\r\n        imdbId = res.imdb_id\r\n      }).catch((err) => {\r\n        return err\r\n      })\r\n      await getMovieRating(imdbId).then((res) => {\r\n        const ratingArr = res.Ratings\r\n        setTrend(prevState => ({\r\n          ...prevState,\r\n          Ratings: ratingArr\r\n        }))\r\n      }).catch((err) => {\r\n        return err\r\n      })\r\n    }\r\n    getFirstHotMovie()\r\n    // 取得熱門電影前20名\r\n    getPopular().then((data) => {\r\n      setIsLoading(true)\r\n      setMovies(data.results)\r\n      setIsLoading(false)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n    // 取得即將上映20部電影\r\n    getUpcomming().then((data) => {\r\n      setIsLoading(true)\r\n      setUpcomming(data.results)\r\n      setIsLoading(false)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n    // 取得熱門演員前20名\r\n    getPopularPeople().then((data) => {\r\n      setIsLoading(true)\r\n      setHotPeople(data.results)\r\n      setIsLoading(false)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n    // 取得各種類型\r\n    getGenre().then((res) => {\r\n      setIsLoading(true)\r\n      const genreArr = []\r\n      for (let i = 0; i < res.genres.length; i++) {\r\n        genreArr.push(res.genres[i])\r\n      }\r\n      setGenre(genreArr)\r\n      setIsLoading(false)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n    // 取得熱門評論\r\n    const db = getDatabase()\r\n    const mostThumbsUpPosts = query(ref(db, 'comments'), orderByValue('thumbs_up'), limitToFirst(3))\r\n    let keyArr = []\r\n    onValue(mostThumbsUpPosts, (snapshot) => {\r\n      const data = snapshot.val()\r\n      keyArr = Object.keys(data)\r\n      const arr = []\r\n      for (let i = 0; i < keyArr.length; i++) {\r\n        arr.push(\r\n          {\r\n            ...data[keyArr[i]],\r\n            isHide: true,\r\n            id: keyArr[i]\r\n          }\r\n        )\r\n      }\r\n      setHotComments(arr)\r\n    })\r\n  }, [])\r\n  // 取得Popular movies分數\r\n  useEffect(() => {\r\n    // setIsLoading(true)\r\n    let arr = []\r\n    // const arr2 = []\r\n    async function getPopularMovieRating () {\r\n      if (movies.length !== 0) {\r\n        const IMDBIDArr = []\r\n        const ratingArr = []\r\n        for (let i = 0; i < movies.length; i++) {\r\n          IMDBIDArr.push(getIMDBID(movies[i].id))\r\n        }\r\n        Promise.all(IMDBIDArr).then((res) => {\r\n          arr = Object.assign([], res)\r\n          for (let i = 0; i < arr.length; i++) {\r\n            ratingArr.push(getMovieRating(arr[i].imdb_id))\r\n          }\r\n        }).then(() => {\r\n          Promise.all(ratingArr).then((res) => {\r\n            setRating(res)\r\n          }).catch((err) => {\r\n            setIsLoading(false)\r\n            return err\r\n          })\r\n        }).catch((err) => {\r\n          setIsLoading(false)\r\n          return err\r\n        })\r\n      }\r\n      // for (let i = 0; i < movies.length; i++) {\r\n      //   await getIMDBID(movies[i].id).then((res) => {\r\n      //     arr.push(res.imdb_id)\r\n      //   })\r\n      // }\r\n      // for (let i = 0; i < arr.length; i++) {\r\n      //   await getMovieRating(arr[i]).then((res) => {\r\n      //     arr2.push(res.Ratings)\r\n      //     const a = res.Ratings\r\n      //     setRating(prevCount => [...prevCount, a])\r\n      //     setIsRatingLoading(prev => prev.map((item, index) => {\r\n      //       if (index !== i) return item\r\n      //       return false\r\n      //     }))\r\n      //   }).catch((err) => {\r\n      //     return err\r\n      //   })\r\n      // }\r\n    }\r\n    getPopularMovieRating()\r\n  }, [movies])\r\n\r\n  const handleCommentOpen = (id) => {\r\n    setHotComments(hotComments.map((item) => {\r\n      if (item.id !== id) return item\r\n      return {\r\n        ...item,\r\n        isHide: !item.isHide\r\n      }\r\n    }))\r\n  }\r\n\r\n  return (\r\n    <div style={ { backgroundColor: '#1C1C1C' } }>\r\n      <Loading isLoading={ isLoading } />\r\n      <Section>\r\n        <RecommendationSection style={ {\r\n          backgroundImage: trend.backdrop_path && `linear-gradient(to top, #1C1C1C, transparent), url(\"https://image.tmdb.org/t/p/original${trend.backdrop_path}\")`\r\n        } }\r\n        >\r\n          <Recommedation>\r\n            <RecommendationTitle>{trend.title}</RecommendationTitle>\r\n            <RecommedationContent>{trend.overview}</RecommedationContent>\r\n            <RecommedationRating>{trend.Ratings && <RatingList Ratings={ trend.Ratings } key={ trend.id } />}</RecommedationRating>\r\n          </Recommedation>\r\n        </RecommendationSection>\r\n        <PopularSection className=\"popular\">\r\n          <Title>Popular</Title>\r\n          <MovieContainer>\r\n            <CarouselConatiner>\r\n              <div className=\"RWD-L\">\r\n                <Carousel cols={ 4 } gap={ 20 }>\r\n                  {Rating.length !== 0 && movies.map((movie, index) =>\r\n                    <Carousel.Item key={ movie.id }>\r\n                      <Movie\r\n                        id={ movie.id }\r\n                        imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` }\r\n                        isRating\r\n                        isRatingLoading={ false }\r\n                        movie={ movie }\r\n                        rating={ Rating[index].Ratings }\r\n                      />\r\n                    </Carousel.Item>\r\n                  )}\r\n                </Carousel>\r\n              </div>\r\n              <div className=\"RWD-S\">\r\n                <Carousel cols={ 2 } gap={ 10 }>\r\n                  {Rating.length !== 0 && movies.map((movie, index) =>\r\n                    <Carousel.Item key={ movie.id }>\r\n                      <Movie\r\n                        id={ movie.id }\r\n                        imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` }\r\n                        isRating\r\n                        isRatingLoading={ false }\r\n                        movie={ movie }\r\n                        rating={ Rating[index].Ratings }\r\n                      />\r\n                    </Carousel.Item>\r\n                  )}\r\n                </Carousel>\r\n              </div>\r\n            </CarouselConatiner>\r\n          </MovieContainer>\r\n        </PopularSection>\r\n        <Title>Upcomming</Title>\r\n        <SubTitle>台灣及全美即將上映</SubTitle>\r\n        <UpcommingSection>\r\n          <MovieContainer>\r\n            <CarouselConatiner>\r\n              <div className=\"RWD-L\">\r\n                <Carousel cols={ 4 } gap={ 10 }>\r\n                  {upcomming.map((movie) =>\r\n                    <Carousel.Item key={ movie.id }>\r\n                      <Movie\r\n                        id={ movie.id }\r\n                        imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` }\r\n                        movie={ movie }\r\n                      />\r\n                    </Carousel.Item>\r\n                  )}\r\n                </Carousel>\r\n              </div>\r\n              <div className=\"RWD-S\">\r\n                <Carousel cols={ 2 } gap={ 10 }>\r\n                  {upcomming.map((movie) =>\r\n                    <Carousel.Item key={ movie.id }>\r\n                      <Movie\r\n                        id={ movie.id }\r\n                        imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` }\r\n                        movie={ movie }\r\n                      />\r\n                    </Carousel.Item>\r\n                  )}\r\n                </Carousel>\r\n              </div>\r\n            </CarouselConatiner>\r\n          </MovieContainer>\r\n        </UpcommingSection>\r\n        <Title>Hottest</Title>\r\n        <HotPeopleSection>\r\n          <Credits credits={ hotPeople }></Credits>\r\n        </HotPeopleSection>\r\n        <Title>Genre</Title>\r\n        <SubTitle>尋找您喜歡的類型</SubTitle>\r\n        <TypeSection >\r\n          {genres.map((genre) => {\r\n            return <Link key={ genre.id } to={ `/search/genre/${genre.id}` }><li>{genre.name}</li></Link>\r\n          })}\r\n        </TypeSection>\r\n        <Title>Comments</Title>\r\n        <HotCommentsSection>\r\n          {hotComments.length !== 0\r\n            ? hotComments.map((item) => {\r\n              return <Comment comment={ item } handleCommentOpen={ handleCommentOpen } isPosterOpen key={ item.id } />\r\n            })\r\n            : <p>還沒有任何評論</p>}\r\n        </HotCommentsSection>\r\n      </Section>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState, useContext } from 'react'\nimport styled from 'styled-components'\nimport { Link, useParams } from 'react-router-dom'\nimport {\n  getMovieDeatil,\n  getMovieRating,\n  getCredits,\n  getSimilar,\n  getVideo,\n  getMovieImage\n} from '../../WebAPI'\nimport Carousel from '../../components/Carousel'\nimport { useColor } from 'color-thief-react'\nimport RatingList from '../../components/Rating'\nimport {\n  getDatabase,\n  ref,\n  onValue,\n  push,\n  query,\n  orderByChild,\n  equalTo\n} from 'firebase/database'\nimport AuthContext from '../../context'\nimport { getDate, getCreatedAt, getUserDeviceType } from '../../utils'\nimport Comment from '../../components/Comments'\nimport Person from '../../components/Person'\nimport Movie from '../../components/Movie'\nimport { SRLWrapper } from 'simple-react-lightbox'\nimport Loading from '../../components/Loading'\n\nconst LeftContainer = styled.div`\n  margin: 0 auto;\n  width: 100%;\n  height: auto;\n  padding: 15%;\n  box-sizing: border-box;\n`\nconst RightContainer = styled.div`\n  margin: 0 auto;\n  width: 100%;\n  font-size: 0.6rem;\n  line-height: 1.5;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  li{\n    list-style-type:none;\n  }\n  .rating-list{\n    margin-top: 5%;\n  }\n  @media (max-width: 415px) {\n    width: 90%;\n    font-size: 14px;\n    margin: 0 auto;\n    h2{\n      font-size: 18px;\n    }\n    .rating-list{\n      \n    }\n  }\n`\nconst Wrapper = styled.div`\n  margin: 30px 100px;\n  @media (max-width: 415px) {\n    margin: 80px 0;\n  }\n`\nconst DetailContainer = styled.div`\n\n  display: grid;\n  grid-template-columns: 50% 50%;\n  z-index: 10000;\n  @media (max-width: 415px) {\n    display: block;\n  }\n`\nconst Recommendations = styled.div`\n  display: flex;\n`\nconst CarouselConatiner = styled.div`\n  max-width: 95%;\n  width: 100%;\n  padding: 20px;\n  margin: 0 auto;\n  box-sizing: border-box;\n  .RWD-S{\n    display: none;\n  }\n  @media (max-width: 415px) {\n    max-width: 100%;\n\n    .RWD-S{\n      display: block;\n    }\n    .RWD-L{\n      display: none;\n    }\n  }\n`\nconst Container = styled.div`\n  padding: 0;\n  font-size: 1rem;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: rgba(255,255,255, 0.5);\n  min-height: 100vh;\n  padding-top: 5%;\n  padding-bottom: 5%;\n  h2{\n    font-size: 1rem;\n  }\n  @media (max-width: 415px) {\n    padding-bottom: 0;\n    h2{\n      font-size: 2.3rem;\n    }\n  }\n`\nconst RecommendImgContainer = styled(Link)`\n  display: inline-block;\n  width: 100%;\n  padding: 30% 0;\n  margin-right: 10px;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  @media (max-width: 415px) {\n    height: 150px;\n  }\n  `\nconst Date = styled.span`\n  \n`\nconst MovieDetailContent = styled.ul`\n  text-align: left;\n  font-size: 0.5rem;\n  margin-top: 5%;\n  line-height: 2;\n  @media (max-width: 415px) {\n    width: 100%;\n    font-size: 14px;\n  }\n`\nconst MovieVideoSection = styled.div`\n  max-width: 100%;\n  margin: 0 auto;\n  width: 100%;\n  height: auto;\n  position: relative;\n  overflow: hidden;\n  padding-top: 25.25%;\n  margin-top: 5%;\n  .responsive-iframe {\n    position: absolute;\n    top: 0%;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n  }\n  p{\n    text-align: center;\n    font-size: 32px;\n    margin-bottom: 5%;\n  }\n  .RWD-S{\n    margin: 0 auto;\n    display: none;\n    opacity: 0;\n  }\n  @media (max-width: 415px) {\n    max-width: 90%;\n    padding-top: 50.25%;\n    p{\n      text-align: center;\n      font-size: 25px;\n      margin-bottom: 15px;\n    }\n    .RWD-S{\n      display: block;\n      opacity: 1;\n    }\n    .RWD-L{\n      display: none;\n      opacity: 0;\n    }\n  }\n`\nconst MovieImgSection = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\nconst MovieImg = styled.img`\n  height: auto;\n  width: 100%;\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n  &:hover{\n    transition: 0.5s;\n    transform: scale(1.1);\n  }\n  @media (max-width: 415px) {\n   \n  }\n`\nconst Keyword = styled.span`\n  display: inline-block;\n  font-size: 0.5rem;\n  border-radius: 10px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  word-break: keep-all;\n  padding: 5px;\n  @media (max-width: 415px) {\n    font-size: 14px;\n  }\n`\nconst CommentSection = styled.div`\n  padding: 80px;\n  width: 60%;\n  margin: 0 auto;\n  a{\n    color: white;\n  }\n  @media (max-width: 415px) {\n    padding: 0;\n    margin-bottom: 50px;\n    width: 85%;\n  }\n`\nconst Pagination = styled.div`\n\n`\nconst AddCommentSection = styled.div`\n  width: 50%;\n  margin: 0 auto;\n  input[type=submit]{\n    margin-top: 3%;\n  }\n  input, textarea{\n    font-size: ${props => props.isMobileDevice ? 'initial' : '0.5rem'}\n  }\n`\nconst AddCommentColumn = styled.div`\n  display: grid;\n  grid-template-columns: 15% 85%;\n`\nconst Comments = styled.div`\n  margin-bottom: 2%;\n`\nconst NoComment = styled.p`\n  margin-bottom: 2%;\n`\nfunction Credits ({ credits }) {\n  return (\n    <CarouselConatiner>\n      <div className=\"RWD-L\">\n        <Carousel cols={ 6 } gap={ 10 }>\n          {credits.map((item) =>\n            <Carousel.Item key={ item.id }>\n              <div>\n                {item.profile_path !== 'null' &&\n                <Person person={ item } />\n            }\n              </div>\n            </Carousel.Item>\n          )}\n        </Carousel>\n      </div>\n      <div className=\"RWD-S\">\n        <Carousel cols={ 3 } gap={ 0 }>\n          {credits.map((item) =>\n            <Carousel.Item key={ item.id }>\n              <div>\n                {item.profile_path !== 'null' &&\n                <Person person={ item } />\n            }\n\n              </div>\n            </Carousel.Item>\n          )}\n        </Carousel>\n      </div>\n\n    </CarouselConatiner>\n  )\n}\nexport default function MovieDetailPage () {\n  const [isLoading, setIsLoading] = useState(true)\n  const [movie, setMovie] = useState([])\n  const [rating, setRating] = useState([])\n  const [recommendations, setRecommendations] = useState([])\n  const [credits, setCredits] = useState([])\n  const [director, setDirector] = useState({})\n  const [video, setVideo] = useState([])\n  const [images, setImages] = useState([])\n  const [comments, setComments] = useState([])\n  const [commentTitle, setcommentTitle] = useState('')\n  const [commentContent, setcommentContent] = useState('')\n  const [isCommentInputOpen, setisCommentInputOpen] = useState(false)\n  const [currentCommentPage, setCurrentCommentPage] = useState(1)\n  const [totalCommentPage, settotalCommentPage] = useState(1)\n  const { id } = useParams()\n  const { user } = useContext(AuthContext)\n  const options = {\n    buttons: {\n      showNextButton: false,\n      showPrevButton: false\n    },\n    thumbnails: {\n      showThumbnails: false\n    }\n  }\n  useEffect(() => {\n    function getComments () {\n      const db = getDatabase()\n      const posts = query(ref(db, 'comments'), orderByChild('movie_id'), equalTo(id))\n      onValue(posts, (snapshot) => {\n        const data = snapshot.val()\n        const arr = []\n        if (data) {\n          const keys = Object.keys(data)\n          const totalPage = Math.ceil(keys.length / 5)\n          settotalCommentPage(totalPage)\n          let len\n          if (keys.length >= 5) {\n            len = 5\n          } else {\n            len = keys.length\n          }\n          for (let i = 0; i < len; i++) {\n            arr.push(\n              {\n                ...data[keys[i]],\n                isHide: true,\n                id: keys[i]\n              }\n            )\n          }\n          setComments(arr.reverse())\n        } else {\n          setComments([])\n        }\n      })\n    }\n    getComments()\n  }, [id])\n\n  let src = ''\n  const format = 'rgbArray'\n  const crossOrigin = 'anonymous'\n  const quality = 10\n  if (movie.poster_path) {\n    src = `https://image.tmdb.org/t/p/original${movie.backdrop_path}`\n  }\n  const { data } = useColor(src, format, { crossOrigin, quality })\n  let backgroundMask = ''\n  let lightness = 0\n  let colorStr = ''\n  if (data) {\n    let str = 'rgba('\n    for (let i = 0; i < data.length; i++) {\n      str += data[i] + ','\n    }\n    str += '0.8)'\n    backgroundMask = str\n  }\n\n  if (data) {\n    const red = data[0]\n    const green = data[1]\n    const blue = data[2]\n    lightness = (red * 0.2126 + green * 0.7152 + blue * 0.0722) / 255\n    colorStr = `hsl(0, 0%, calc((${lightness} - 0.5) * -999999%))`\n  }\n  useEffect(() => {\n    window.scrollTo(0, 0)\n    setIsLoading(true)\n    getMovieDeatil(id).then((res) => {\n      setMovie(res)\n      return res\n    }).then((res) => {\n      setIsLoading(false)\n      getVideo(res.id).then((res) => {\n        const videoArr = res.results.filter(item => {\n          return item.type === 'Trailer'\n        })\n        setVideo(videoArr[0])\n      })\n      getMovieRating(res.imdb_id).then((res) => {\n        setRating(res.Ratings)\n      })\n      getSimilar(res.id).then((res) => {\n        setRecommendations(res.results)\n      })\n    })\n    getCredits(id).then((res) => {\n      const director = res.crew.filter((item) => {\n        return item.job === 'Director'\n      })\n      setCredits(res.cast)\n      setDirector(director[0])\n    })\n    getMovieImage(id).then((res) => {\n      const imgArr = res.backdrops\n      setImages(imgArr)\n    })\n  }, [id])\n\n  const handleCommentSubmit = () => {\n    function writeUserData () {\n      const db = getDatabase()\n      const date = getDate()\n      const createdAt = getCreatedAt()\n      push(ref(db, 'comments'), {\n        content: commentContent,\n        title: commentTitle,\n        date: date,\n        display_name: user.providerData[0].displayName,\n        thumbs_up: 0,\n        movie_id: id,\n        uid: user.uid,\n        createdAt: createdAt\n      })\n    }\n    if (commentTitle !== '' && commentContent !== '') {\n      writeUserData()\n      setcommentTitle('')\n      setcommentContent('')\n    } else {\n      alert('請輸入評論標題及內容')\n    }\n  }\n  const handleCommentOpen = (id) => {\n    setComments(comments.map((item) => {\n      if (item.id !== id) return item\n      return {\n        ...item,\n        isHide: !item.isHide\n      }\n    }))\n  }\n  const handleCommentPage = (isNextPage) => {\n    const db = getDatabase()\n    const posts = query(ref(db, 'comments'), orderByChild('movie_id'), equalTo(id))\n    if (isNextPage) {\n      onValue(posts, (snapshot) => {\n        const data = snapshot.val()\n        const arr = []\n        if (data) {\n          const keys = Object.keys(data)\n          let len\n          if (keys.length >= currentCommentPage * 5 + 4) {\n            len = currentCommentPage * 5 + 4\n          } else {\n            len = keys.length\n          }\n          for (let i = currentCommentPage * 5; i < len; i++) {\n            arr.push(\n              {\n                ...data[keys[i]],\n                isHide: true,\n                id: keys[i]\n              }\n            )\n          }\n          setComments(arr.reverse())\n          setCurrentCommentPage(currentCommentPage + 1)\n        }\n      })\n    } else if (!isNextPage) {\n      onValue(posts, (snapshot) => {\n        const data = snapshot.val()\n        const arr = []\n        if (data) {\n          const keys = Object.keys(data)\n          let len\n          if (keys.length >= (currentCommentPage - 2) * 5 + 4) {\n            len = (currentCommentPage - 2) * 5 + 4\n          } else {\n            len = keys.length\n          }\n          for (let i = (currentCommentPage - 2) * 5; i < len; i++) {\n            arr.push(\n              {\n                ...data[keys[i]],\n                isHide: true,\n                id: keys[i]\n              }\n            )\n          }\n          setComments(arr.reverse())\n          setCurrentCommentPage(currentCommentPage - 1)\n        }\n      })\n    }\n  }\n\n  return (\n    <div style={ {\n      backgroundColor: '#1C1C1C', color: 'white'\n    } }\n    >\n      <Loading isLoading={ isLoading } />\n      {movie.poster_path &&\n      <Container style={ {\n        backgroundImage: `linear-gradient(to top, #1C1C1C, ${backgroundMask}), url(\"https://image.tmdb.org/t/p/original${movie.backdrop_path}\")`\n      } }\n      >\n        <Wrapper>\n          <DetailContainer>\n            <LeftContainer>\n              <Movie\n                id={ movie.id }\n                imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` }\n                key={ movie.id }\n                movie={ movie }\n              />\n            </LeftContainer>\n            <RightContainer style={ {\n              color: `${colorStr}`\n            } }\n            >\n              <h2>{movie.title}<Date>({movie.release_date.substr(0, 4)})</Date></h2>\n              <p>{movie.overview}</p>\n              {rating && <div className=\"rating-list\"><RatingList Ratings={ rating }></RatingList></div>}\n              <MovieDetailContent>\n                {director && <li>導演：{director.name}</li>}\n                <li>片長：{movie.runtime}</li>\n                <li>官方網站：{movie.homepage}</li>\n                <li>關鍵字：{movie.keywords.keywords.map((item, index) => {\n                  return <Keyword key={ index } style={ { border: `1px solid ${colorStr}` } }>{'#' + item.name}</Keyword>\n                })}</li>\n              </MovieDetailContent>\n            </RightContainer>\n          </DetailContainer>\n          <h2>相關圖片：</h2>\n          <MovieImgSection>\n            <CarouselConatiner>\n              <div className=\"RWD-L\">\n                <Carousel cols={ 4 } gap={ 10 }>\n                  {images && images.map((item, index) => {\n                    return <Carousel.Item key={ index }>\n                      <SRLWrapper options={ options }>\n                        <MovieImg src={ `https://image.tmdb.org/t/p/original${item.file_path}` }></MovieImg>\n                      </SRLWrapper>\n                    </Carousel.Item>\n                  })}\n                </Carousel>\n              </div>\n              <div className=\"RWD-S\">\n                <Carousel cols={ 2 } gap={ 10 }>\n                  {images && images.map((item, index) => {\n                    return <Carousel.Item key={ index }>\n                      <SRLWrapper options={ options }>\n                        <MovieImg src={ `https://image.tmdb.org/t/p/original${item.file_path}` }></MovieImg>\n                      </SRLWrapper>\n                    </Carousel.Item>\n                  })}\n                </Carousel>\n              </div>\n            </CarouselConatiner>\n          </MovieImgSection>\n          <h2>預告：</h2>\n          <MovieVideoSection>\n            {video && <iframe allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen className=\"responsive-iframe\" frameBorder=\"0\" src={ `https://www.youtube.com/embed/${video.key}?autoplay=0` } title=\"YouTube video player\"></iframe>}\n          </MovieVideoSection>\n        </Wrapper>\n      </Container>}\n      <h2>Credits</h2>\n      <Credits credits={ credits }></Credits>\n      <h2>Comments</h2>\n      <CommentSection>\n        <Comments>\n          {comments.length !== 0\n            ? comments.map((item) => {\n              return <Comment comment={ item } handleCommentOpen={ handleCommentOpen } key={ item.id } />\n            })\n            : <NoComment>還沒有任何評論</NoComment>}\n          {user ? <button onClick={ () => { setisCommentInputOpen(!isCommentInputOpen) } }>新增評論</button> : <Link to=\"/login\">點我登入評論</Link>}\n        </Comments>\n        {isCommentInputOpen &&\n        <AddCommentSection isMobileDevice={ getUserDeviceType() }>\n          <AddCommentColumn>\n            <span>標題：</span><input onChange={ (e) => setcommentTitle(e.target.value) } type=\"text\" value={ commentTitle } />\n          </AddCommentColumn>\n          <AddCommentColumn>\n            <span>內容：</span><textarea onChange={ (e) => setcommentContent(e.target.value) } type=\"text\" value={ commentContent } />\n          </AddCommentColumn>\n          <input onClick={ handleCommentSubmit } type=\"submit\"></input>\n        </AddCommentSection>\n          }\n        <Pagination>\n          {currentCommentPage !== 1 ? <button onClick={ () => { handleCommentPage(false) } }>&lt;</button> : false}\n          {currentCommentPage}\n          {totalCommentPage !== currentCommentPage ? <button onClick={ () => { handleCommentPage(true) } }>&gt;</button> : false}\n        </Pagination>\n      </CommentSection>\n      <h2>推薦專區</h2>\n      <Recommendations>\n        <CarouselConatiner>\n          <Carousel cols={ 3 } gap={ 10 }>\n            {recommendations.map((item) =>\n              <Carousel.Item key={ item.id }>\n                <div>\n                  {item.poster_path && <RecommendImgContainer\n                    style={ {\n                      backgroundImage: `url(\"https://image.tmdb.org/t/p/w500${item.poster_path}\")`\n                    } } to={ `/movie/${item.id}` }\n                                       >\n                  </RecommendImgContainer>}\n                </div>\n              </Carousel.Item>\n            )}\n          </Carousel>\n        </CarouselConatiner>\n      </Recommendations>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useParams } from 'react-router-dom'\r\nimport {\r\n  getGenreSearch,\r\n  getGenre,\r\n  getIMDBID,\r\n  getMovieRating\r\n} from '../../WebAPI'\r\nimport Loading from '../../components/Loading'\r\nimport Movie from '../../components/Movie'\r\n\r\nconst Container = styled.div`\r\n  background: #1C1C1C;\r\n  padding-top: 80px;\r\n`\r\nconst ResultContainer = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  box-sizing: border-box;\r\n  justify-content: center;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n  }\r\n\r\n`\r\nconst TypeTitle = styled.h2`\r\n    padding: 60px 0px;\r\n    color: white;\r\n`\r\nconst PageContainer = styled.div`\r\n    color: white;\r\n    padding: 30px 0px;\r\n`\r\nconst ItemContainer = styled.div`\r\n  width: 23%;\r\n  margin: 1%;\r\n  @media (max-width: 415px) {\r\n    width: 45%;\r\n  }\r\n`\r\nexport default function SearchGenrePage () {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [movies, setMovies] = useState([])\r\n  const [genres, setGenre] = useState([])\r\n  const [Rating, setRating] = useState([])\r\n  const [currentPage, setCurrentPage] = useState('')\r\n  const [totalPage, setTotalPage] = useState('')\r\n  // const [isRatingLoading, setIsRatingLoading] = useState(Array(20).fill(true))\r\n  // const isRatingLoading = useRef(Array(20).fill(true))\r\n  const { id } = useParams()\r\n  // 拿到此類型的電影集\r\n  useEffect(() => {\r\n    if (id !== '') {\r\n      getGenreSearch(id).then((res) => {\r\n        setIsLoading(true)\r\n        setCurrentPage(res.page)\r\n        setTotalPage(res.total_pages)\r\n        setMovies(res.results)\r\n      })\r\n    }\r\n  }, [id])\r\n  // 取得此類型電影集評分\r\n  useEffect(() => {\r\n    let arr = []\r\n    // const arr2 = []\r\n    function getMoviesRatings () {\r\n      setIsLoading(true)\r\n      const IMDBIDArr = []\r\n      const ratingArr = []\r\n      for (let i = 0; i < movies.length; i++) {\r\n        IMDBIDArr.push(getIMDBID(movies[i].id))\r\n      }\r\n      Promise.all(IMDBIDArr).then((res) => {\r\n        arr = Object.assign([], res)\r\n        for (let i = 0; i < arr.length; i++) {\r\n          ratingArr.push(getMovieRating(arr[i].imdb_id))\r\n        }\r\n      }).then(() => {\r\n        Promise.all(ratingArr).then((res) => {\r\n          setRating(res)\r\n          setIsLoading(false)\r\n        }).catch((err) => {\r\n          setIsLoading(false)\r\n          return err\r\n        })\r\n      }).catch((err) => {\r\n        return err\r\n      })\r\n      // for (let i = 0; i < movies.length; i++) {\r\n      //   await getIMDBID(movies[i].id).then((res) => {\r\n      //     arr.push(res.imdb_id)\r\n      //   }).catch(() => {\r\n      //     arr.push(null)\r\n      //   })\r\n      // }\r\n      // for (let i = 0; i < arr.length; i++) {\r\n      //   await getMovieRating(arr[i]).then((res) => {\r\n      //     arr2.push(res.Ratings)\r\n      //     const a = res.Ratings\r\n      //     setRating(prevCount => [...prevCount, a])\r\n\r\n      //     setIsRatingLoading(prev => prev.map((item, index) => {\r\n      //       if (index !== i) return item\r\n      //       return false\r\n      //     }))\r\n      //     // isRatingLoading.current[i] = false\r\n      //     // Sconsole.log(`${i}`,isRatingLoading.current[i])\r\n      //   }).catch(() => {\r\n      //     setRating(prevCount => [...prevCount, []])\r\n      //   })\r\n      // }\r\n      // setRating(arr2)\r\n    }\r\n    getMoviesRatings()\r\n  }, [movies])\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true)\r\n    getGenre().then((res) => {\r\n      const genreArr = []\r\n      for (let i = 0; i < res.genres.length; i++) {\r\n        genreArr.push(res.genres[i])\r\n      }\r\n      setGenre(genreArr)\r\n    })\r\n  }, [])\r\n  const handlePageChange = (page) => {\r\n    window.scrollTo(0, 0)\r\n    setIsLoading(true)\r\n    setRating([])\r\n    // setIsRatingLoading(Array(20).fill(true))\r\n    if (id !== '') {\r\n      getGenreSearch(id, page).then((res) => {\r\n        setCurrentPage(res.page)\r\n        setMovies(res.results)\r\n      })\r\n    }\r\n    // setIsLoading(false)\r\n  }\r\n  return (\r\n    <Container>\r\n      <Loading isLoading={ isLoading } />\r\n      <TypeTitle>\r\n        {genres\r\n          .filter((item) => {\r\n            return item.id.toString() === id\r\n          })\r\n          .map((item) => {\r\n            return item.name + '類型搜尋結果'\r\n          })\r\n        }\r\n      </TypeTitle>\r\n      <ResultContainer>\r\n        {Rating.length !== 0 && movies && movies.map((item, index) => {\r\n          return <ItemContainer className=\"RWD-L\" key={ item.id } ><Movie isRating isRatingLoading={ false } movie={ item } rating={ Rating[index].Ratings } /></ItemContainer>\r\n        })}\r\n        {Rating.length !== 0 && movies && movies.map((item, index) => {\r\n          return <ItemContainer className=\"RWD-S\" key={ item.id } ><Movie isRating isRatingLoading={ false } movie={ item } rating={ Rating[index].Ratings } /></ItemContainer>\r\n        })}\r\n      </ResultContainer>\r\n      <PageContainer>\r\n        {currentPage !== 1 ? <button onClick={ () => { handlePageChange(currentPage - 1) } }>&lt;</button> : ''}\r\n        {currentPage}\r\n        {currentPage !== totalPage ? <button onClick={ () => { handlePageChange(currentPage + 1) } }>&gt;</button> : ''}\r\n      </PageContainer>\r\n    </Container>\r\n\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useParams } from 'react-router-dom'\r\nimport {\r\n  getGenre,\r\n  getSearchData,\r\n  getIMDBID,\r\n  getMovieRating\r\n} from '../../WebAPI'\r\nimport Movie from '../../components/Movie'\r\nimport Person from '../../components/Person'\r\nimport RatingList from '../../components/Rating'\r\nimport Loading from '../../components/Loading'\r\n// import { push } from '@firebase/database'\r\n\r\nconst Container = styled.div`\r\n  background: #1C1C1C;\r\n  line-height: 1.5;\r\n  color: white;\r\n  padding-top: 8%;\r\n  min-height: 100vh;\r\n  @media (max-width: 415px) {\r\n    display: block;\r\n    padding-top: 15%;\r\n  }\r\n`\r\nconst Wrapper = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 30% 70%;\r\n  @media (max-width: 415px) {\r\n    display: block;\r\n  }\r\n`\r\nconst ResultContainer = styled.div`\r\n  width: 100%;\r\n  @media (max-width: 415px) {\r\n    margin-top: 15%;\r\n  }\r\n`\r\nconst MovieContainer = styled.div`\r\n  border: 1px solid;\r\n  margin: 20px auto;\r\n  display: grid;\r\n  grid-template-columns: 30% 70%;\r\n  align-items: center;\r\n  max-width: 90%;\r\n  @media (max-width: 415px) {\r\n    max-width: 90%;\r\n    grid-template-columns: 40% 60%;\r\n  }\r\n`\r\nconst ContentContainer = styled.div`\r\n  margin: 0 auto;\r\n  padding: 8%;\r\n  font-size: 0.5rem;\r\n  li{\r\n    list-style: none;\r\n  }\r\n  .rating-list{\r\n    margin-top: 5%;\r\n  }\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  p{\r\n    display: -webkit-box;\r\n    overflow:hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    -webkit-line-clamp: 8;\r\n    -webkit-box-orient: vertical;\r\n    white-space: normal;\r\n    text-align: justify;\r\n  }\r\n  @media (max-width: 900px) {\r\n    p{\r\n      display: -webkit-box;\r\n      overflow:hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      -webkit-line-clamp: 4;\r\n      -webkit-box-orient: vertical;\r\n      white-space: normal;\r\n      font-size: 1rem;\r\n    }\r\n    h2{\r\n      font-size: 2rem;\r\n    }\r\n  }\r\n  @media (max-width: 415px) {\r\n    .RWD-L{\r\n      display: block;\r\n    }\r\n    padding: 0px 5%;\r\n    h2{\r\n      font-weight: bold;\r\n    }\r\n\r\n  }\r\n`\r\nconst ClassificationList = styled.div`\r\n  margin: 0 auto;\r\n  min-width: 80%;\r\n  margin-top: 10%;\r\n  font-size: 0.5rem;\r\n  @media (max-width: 415px) {\r\n    display: none;\r\n  }\r\n \r\n`\r\nconst PageContainer = styled.div`\r\n\r\n`\r\nconst ItemContainer = styled.div`\r\n  width: 100%;\r\n  margin: 1%;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n    img{\r\n      height: 200px;\r\n    }\r\n  }\r\n`\r\nconst NotFoundMessage = styled.p`\r\n  color: white;\r\n  text-align: left;\r\n  margin-top: 5%;\r\n  @media (max-width: 415px) {\r\n    text-align: center;\r\n  }\r\n`\r\nconst Filter = styled.li`\r\n  ${(props) => props.$active &&\r\n    `\r\n      background: white;\r\n      color: black;\r\n    `}\r\n  list-style: none;\r\n  padding-left: 0;\r\n  width: 100%;\r\n  padding: 5% 0;\r\n  border: 1px solid white;\r\n  cursor: pointer;\r\n`\r\nfunction People ({ person }) {\r\n  return (\r\n    <MovieContainer>\r\n      <Person isName={ false } person={ person } />\r\n      <ContentContainer>\r\n        <h2>{person.name}</h2>\r\n        <p>代表作: {person.known_for.map((item, index) => {\r\n          return <li key={ index }>{item.title}</li>\r\n        })}</p>\r\n      </ContentContainer>\r\n    </MovieContainer>\r\n  )\r\n}\r\nfunction SearchMovie ({ movie, rating }) {\r\n  // let imgUrl = `https://image.tmdb.org/t/p/w500${movie.poster_path}`\r\n  return (\r\n    <MovieContainer>\r\n      <ItemContainer>\r\n        <div className=\"RWD-L\">\r\n          <Movie id={ movie.id } imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` } isRating={ false } key={ movie.id } movie={ movie } rating={ rating } />\r\n        </div>\r\n        <div className=\"RWD-S\">\r\n          <Movie id={ movie.id } imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` } isRating={ false } key={ movie.id } movie={ movie } rating={ rating } />\r\n        </div>\r\n\r\n      </ItemContainer>\r\n      <ContentContainer>\r\n        <h2>{movie.title}</h2>\r\n        <p>{movie.overview}</p>\r\n        <div className=\"RWD-S\"></div>\r\n        <div className=\"rating-list\"><RatingList Ratings={ rating } logoWidth=\"30px\" /></div>\r\n      </ContentContainer>\r\n    </MovieContainer>\r\n  )\r\n}\r\n\r\nexport default function SearchPage () {\r\n  const [movies, setMovies] = useState([])\r\n  const [genres, setGenre] = useState([])\r\n  const [rating, setRating] = useState([])\r\n  const [searchItemGenreID, setsearchItemGenreID] = useState([])\r\n  const [currentType, setCurrentType] = useState(0)\r\n  const [typesCount, settypesCount] = useState({\r\n    allCount: 0,\r\n    movieCount: 0,\r\n    peopleCount: 0\r\n  })\r\n  const [isTypeListOpen, setIsTypeListOpen] = useState(false)\r\n  const [currentGenre, setCurrentGenre] = useState(0)\r\n  const [currentPage, setCurrentPage] = useState('')\r\n  const [totalPage, setTotalPage] = useState('')\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const { query } = useParams()\r\n  useEffect(() => {\r\n    if (query !== '') {\r\n      window.scrollTo(0, 0)\r\n      setIsLoading(true)\r\n      setRating([])\r\n      setMovies([])\r\n      getSearchData(query).then((res) => {\r\n        setCurrentPage(res.page)\r\n        setTotalPage(res.total_pages)\r\n        let movieCount = 0\r\n        let peopleCount = 0\r\n        const genreArr = []\r\n        res.results.forEach((item) => {\r\n          if (item.media_type === 'movie') {\r\n            item.genre_ids.forEach((genreID) => {\r\n              const isFind = genreArr.find((itemID) => itemID === genreID)\r\n              if (!isFind) {\r\n                genreArr.push(genreID)\r\n              }\r\n            })\r\n          }\r\n\r\n          if (item.media_type === 'movie') {\r\n            return movieCount++\r\n          }\r\n          if (item.media_type === 'tv') {\r\n            return null\r\n          }\r\n          if (item.media_type === 'person') {\r\n            return peopleCount++\r\n          }\r\n        })\r\n        const allCount = movieCount + peopleCount\r\n        setsearchItemGenreID(genreArr)\r\n        setMovies(res.results.sort((a, b) => {\r\n          return b.popularity - a.popularity\r\n        }))\r\n        settypesCount({\r\n          allCount,\r\n          movieCount,\r\n          peopleCount\r\n        })\r\n      })\r\n    }\r\n  }, [query])\r\n\r\n  // 取得搜尋電影的評分\r\n  useEffect(() => {\r\n    setRating([])\r\n    let arr = []\r\n    // const arr2 = []\r\n    function getSearchMovieRating () {\r\n      const IMDBIDArr = []\r\n      const ratingArr = []\r\n      for (let i = 0; i < movies.length; i++) {\r\n        if (movies[i].media_type === 'movie') {\r\n          IMDBIDArr.push(getIMDBID(movies[i].id))\r\n        } else {\r\n          IMDBIDArr.push(null)\r\n        }\r\n      }\r\n      Promise.all(IMDBIDArr).then((res) => {\r\n        arr = Object.assign([], res)\r\n        for (let i = 0; i < arr.length; i++) {\r\n          if (arr[i] !== null) {\r\n            ratingArr.push(getMovieRating(arr[i].imdb_id))\r\n          } else {\r\n            ratingArr.push(null)\r\n          }\r\n        }\r\n      }).then(() => {\r\n        Promise.all(ratingArr).then((res) => {\r\n          const ratingTempArr = []\r\n          res.forEach((item) => {\r\n            if (item !== null) {\r\n              ratingTempArr.push(item.Ratings)\r\n            } else {\r\n              ratingTempArr.push(null)\r\n            }\r\n          })\r\n          setRating(ratingTempArr)\r\n          setIsLoading(false)\r\n        }).catch((err) => {\r\n          setIsLoading(false)\r\n          return err\r\n        })\r\n      }).catch((err) => {\r\n        setIsLoading(false)\r\n        return err\r\n      })\r\n      // for (let i = 0; i < movies.length; i++) {\r\n      //   if (movies[i].media_type === 'movie') {\r\n      //     await getIMDBID(movies[i].id).then((res) => {\r\n      //       arr.push(res.imdb_id)\r\n      //     })\r\n      //   } else {\r\n      //     arr.push(null)\r\n      //   }\r\n      // }\r\n      // for (let i = 0; i < arr.length; i++) {\r\n      //   await getMovieRating(arr[i]).then((res) => {\r\n      //     arr2.push(res.Ratings)\r\n      //     const a = res.Ratings\r\n      //     setRating(prevCount => [...prevCount, a])\r\n      //   })\r\n      // }\r\n    }\r\n    getSearchMovieRating()\r\n  }, [movies])\r\n\r\n  useEffect(() => {\r\n    getGenre().then((res) => {\r\n      const genreArr = []\r\n      const arr2 = []\r\n      for (let i = 0; i < res.genres.length; i++) {\r\n        genreArr.push(res.genres[i])\r\n      }\r\n      for (let i = 0; i < searchItemGenreID.length; i++) {\r\n        const id = genreArr.find((item) => {\r\n          return item.id === searchItemGenreID[i]\r\n        })\r\n        arr2.push(id)\r\n      }\r\n      setGenre(arr2)\r\n    })\r\n  }, [searchItemGenreID])\r\n  const handleCurrentType = (e) => {\r\n    if (e.target.nodeName === 'LI') {\r\n      if (e.target.dataset.value === '0') {\r\n        setCurrentType(0)\r\n      }\r\n      if (e.target.dataset.value === '1') {\r\n        setCurrentType(1)\r\n      }\r\n      if (e.target.dataset.value === '2') {\r\n        setCurrentType(2)\r\n      }\r\n      if (e.target.dataset.value === '3') {\r\n        setCurrentType(3)\r\n      }\r\n    }\r\n  }\r\n  const handleisTypeListOpen = () => {\r\n    setIsTypeListOpen(!isTypeListOpen)\r\n  }\r\n  const handleCurrentGenre = (e) => {\r\n    setCurrentGenre(e.target.value)\r\n  }\r\n  const handlePageChange = (page) => {\r\n    window.scrollTo(0, 0)\r\n    getSearchData(query, page).then((res) => {\r\n      setCurrentPage(res.page)\r\n      setTotalPage(res.total_pages)\r\n      let movieCount = 0\r\n      let peopleCount = 0\r\n      const genreArr = []\r\n      res.results.forEach((item) => {\r\n        if (item.media_type === 'movie') {\r\n          item.genre_ids.forEach((genreID) => {\r\n            const isFind = genreArr.find((itemID) => itemID === genreID)\r\n            if (!isFind) {\r\n              genreArr.push(genreID)\r\n            }\r\n          })\r\n        }\r\n\r\n        if (item.media_type === 'movie') {\r\n          return movieCount++\r\n        }\r\n        if (item.media_type === 'tv') {\r\n          return\r\n        }\r\n        if (item.media_type === 'person') {\r\n          return peopleCount++\r\n        }\r\n      })\r\n      const allCount = movieCount + peopleCount\r\n      setsearchItemGenreID(genreArr)\r\n      setMovies(res.results)\r\n      settypesCount({\r\n        allCount,\r\n        movieCount,\r\n        peopleCount\r\n      })\r\n    })\r\n  }\r\n  return (\r\n    <Container>\r\n      <Loading isLoading={ isLoading } />\r\n      <Wrapper>\r\n        <ClassificationList>\r\n          <ul onClick={ (e) => { handleCurrentType(e) } }>\r\n            <Filter $active={ currentType === 0 } data-value=\"0\">全部 {typesCount.allCount}</Filter>\r\n            <Filter $active={ currentType === 1 } data-value=\"1\">電影 {typesCount.movieCount}</Filter>\r\n            <Filter $active={ currentType === 2 } data-value=\"2\">人物 {typesCount.peopleCount}</Filter>\r\n            <Filter $active={ currentType === 3 } onClick={ handleisTypeListOpen }>類型</Filter>\r\n            {genres && isTypeListOpen &&\r\n            genres.map((genre) => {\r\n              return <li className=\"genre-DDL\" data-value=\"3\" key={ genre.id } onClick={ (e) => { handleCurrentGenre(e) } } value={ genre.id }>{genre.name}</li>\r\n            })}\r\n          </ul>\r\n        </ClassificationList>\r\n        <ResultContainer>\r\n          {rating.length !== 0 && movies.length !== 0 && currentType === 0 &&\r\n        movies.map((item, index) => {\r\n          if (item.media_type === 'movie') {\r\n            return <SearchMovie key={ item.id } movie={ item } rating={ rating[index] } />\r\n          }\r\n          if (item.media_type === 'person') {\r\n            return <People key={ item.id } person={ item } />\r\n          }\r\n          return null\r\n        }) }\r\n          {rating.length !== 0 && movies && currentType === 1 && typesCount.movieCount !== 0 &&\r\n          movies\r\n            .filter((item) => {\r\n              return item.media_type === 'movie'\r\n            })\r\n            .map((item, index) => {\r\n              return <SearchMovie key={ item.id } movie={ item } rating={ rating[index] } />\r\n            })\r\n        }\r\n          {movies && currentType === 2 && typesCount.peopleCount !== 0 &&\r\n          movies\r\n            .filter((item) => {\r\n              return item.media_type === 'person'\r\n            })\r\n            .map((item) => {\r\n              return <People key={ item.id } person={ item } />\r\n            })\r\n        }\r\n          {rating.length !== 0 && movies && currentType === 3 && typesCount.allCount !== 0 &&\r\n          movies\r\n            .filter((item) => {\r\n              return item.media_type === 'movie'\r\n            })\r\n            .filter((item) => {\r\n              let genreFilter = false\r\n              item.genre_ids.some((genre) => {\r\n                genreFilter = (genre === currentGenre)\r\n                return genreFilter\r\n                // return genre === currentGenre ? genreFilter = true : genreFilter = false\r\n              })\r\n              return genreFilter === true\r\n            })\r\n            .map((item, index) => {\r\n              return <SearchMovie key={ item.id } movie={ item } rating={ rating[index] } />\r\n            })\r\n        }\r\n          {movies.length === 0 && <NotFoundMessage>找不到任何搜尋結果</NotFoundMessage>}\r\n        </ResultContainer>\r\n      </Wrapper>\r\n      {!isLoading && <PageContainer>\r\n        {currentPage !== 1 ? <button onClick={ () => { handlePageChange(currentPage - 1) } }>&lt;</button> : ''}\r\n        {currentPage}\r\n        {currentPage !== totalPage && totalPage !== 0 ? <button onClick={ () => { handlePageChange(currentPage + 1) } }>&gt;</button> : ''}\r\n      </PageContainer>}\r\n    </Container>\r\n\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useParams } from 'react-router-dom'\r\nimport { getPeopleDetail, getPeopleMovies, getPeopleDetailEng } from '../../WebAPI'\r\nimport Movie from '../../components/Movie'\r\nimport Carousel from '../../components/Carousel'\r\n\r\nconst Container = styled.div`\r\n  background: #1C1C1C;\r\n  color: white;\r\n`\r\nconst ImgContainer = styled.div`\r\n  height: 500px;\r\n  width: 50%;\r\n  background-position: center;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  @media (max-width: 415px) {\r\n    width: 100%;\r\n  }\r\n`\r\nconst PersonContainer = styled.div`\r\n  padding: 0 20%; \r\n  padding-top: 10%;\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  @media (max-width: 415px) {\r\n    display: block;\r\n    padding: 25% 0 10% 0;\r\n  }\r\n`\r\nconst PersonContent = styled.div`\r\n  width: 50%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items:center;\r\n  justify-content: center;\r\n  line-height: 1.5;\r\n  font-size: 0.4rem;\r\n  @media (max-width: 415px) {\r\n    width: 100%;\r\n    font-size: 16px;\r\n  }\r\n`\r\nconst FamousMovieSection = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  .RWD-S{\r\n    display: none;\r\n  }\r\n  @media (max-width: 415px) {\r\n    .RWD-S{\r\n      display: block;\r\n    }\r\n    .RWD-L{\r\n      display: none;\r\n    }\r\n  }\r\n`\r\nconst Biography = styled.p`\r\n  margin-top: 3%;\r\n  line-height: 1.5;\r\n  @media (max-width: 415px) {\r\n    line-height: 1.5;\r\n    \r\n  }\r\n`\r\nconst Title = styled.h2`\r\n  margin-top: 60px;\r\n`\r\nconst Wrapper = styled.div`\r\n  margin: 0 auto;\r\n  max-width: 80%;\r\n  @media (max-width: 415px) {\r\n    max-wdith: 90%;\r\n  }\r\n`\r\nconst ItemContainer = styled.div`\r\n  width: 23%;\r\n  margin: 1%;\r\n  @media (max-width: 415px) {\r\n    width: 45%;\r\n  }\r\n`\r\nconst CarouselConatiner = styled.div`\r\n  max-width: 95%;\r\n  width: 100%;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  background: #1C1C1C;\r\n`\r\nconst NotFoundMessage = styled.p`\r\n  text-align: center;\r\n  margin-top: 2%;\r\n`\r\nconst LanguageButton = styled.button`\r\n  background: transparent;\r\n  border: 1px solid white;\r\n  color: white;\r\n  cursor: pointer;\r\n  ${(props) => props.$active &&\r\n    `\r\n      background: white;\r\n      color: black;\r\n    `}\r\n`\r\nexport default function CreditPage () {\r\n  const [person, setPerson] = useState({})\r\n  const [biography, setBiography] = useState('')\r\n  const [biographyLang, setBiographyLang] = useState('chi')\r\n  const [famousMovie, setfamousMovie] = useState([])\r\n  const [otherMovie, setotherMovie] = useState([])\r\n  const { id } = useParams()\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    getPeopleDetail(id).then((res) => {\r\n      setPerson(res)\r\n      setBiography(res.biography)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n    getPeopleMovies(id).then((res) => {\r\n      const arr = res.cast\r\n        .sort((a, b) => {\r\n          return b.popularity - a.popularity\r\n        })\r\n        .slice(0, 4)\r\n      const arr2 = res.cast\r\n        .sort((a, b) => {\r\n          return b.popularity - a.popularity\r\n        })\r\n        .slice(4, res.cast.length - 1)\r\n      setfamousMovie(arr)\r\n      setotherMovie(arr2)\r\n    }).catch((err) => {\r\n      return err\r\n    })\r\n  }, [id])\r\n\r\n  const handleBioLanguage = (language) => {\r\n    if (language === 'eng') {\r\n      getPeopleDetailEng(id).then((res) => {\r\n        setBiography(res.biography)\r\n        setBiographyLang('eng')\r\n      })\r\n    }\r\n    if (language === 'chi') {\r\n      getPeopleDetail(id).then((res) => {\r\n        setBiography(res.biography)\r\n        setBiographyLang('chi')\r\n      })\r\n    }\n  }\r\n  return (\r\n    <Container>\r\n      <Wrapper>\r\n        <PersonContainer>\r\n          {person.profile_path &&\r\n          <ImgContainer style={ { backgroundImage: `url(\"https://image.tmdb.org/t/p/w500${person.profile_path}\")` } }>\r\n          </ImgContainer>}\r\n          <PersonContent>\r\n            <h2>{person.name}</h2>\r\n            {person.birthday ? <p>生日：{person.birthday}</p> : <NotFoundMessage>生日：目前沒有資料</NotFoundMessage>}\r\n            {person.place_of_birth ? <p>出生地：{person.place_of_birth}</p> : <NotFoundMessage>出生地：目前沒有資料</NotFoundMessage>}\r\n          </PersonContent>\r\n        </PersonContainer>\r\n        <LanguageButton $active={ biographyLang === 'chi' } onClick={ () => { handleBioLanguage('chi') } }>中文版</LanguageButton>\r\n        <LanguageButton $active={ biographyLang === 'eng' } onClick={ () => { handleBioLanguage('eng') } }>英文版</LanguageButton><br />\r\n        <Biography>{biography === '' ? '暫時沒有資料' : biography}</Biography>\r\n        <Title>著名電影：</Title>\r\n        <FamousMovieSection >\r\n          {famousMovie.length !== 0\n            ? (famousMovie.map((item) => {\r\n                return <ItemContainer className=\"RWD-L\" key={ item.id }>\r\n                  <Movie id={ item.id } imgUrl={ `https://image.tmdb.org/t/p/w500${item.poster_path}` } movie={ item } /></ItemContainer>\r\n              }))\n            : <NotFoundMessage>目前沒有資料</NotFoundMessage>}\r\n          {famousMovie !== 0\n            ? (famousMovie.map((item) => {\r\n                return <ItemContainer className=\"RWD-S\" key={ item.id }><Movie id={ item.id } imgUrl={ `https://image.tmdb.org/t/p/w500${item.poster_path}` } key={ item.id } movie={ item } /></ItemContainer>\r\n              }))\n            : <div className=\"RWD-S\"><NotFoundMessage>目前沒有資料</NotFoundMessage></div>}\r\n        </FamousMovieSection>\r\n        <Title>其他電影：</Title>\r\n        <FamousMovieSection>\r\n          <CarouselConatiner>\r\n            {otherMovie.length !== 0\r\n              ? (<div className=\"RWD-L\">\r\n                <Carousel cols={ 5 } gap={ 10 }>\r\n                  {otherMovie && otherMovie.map((item) => {\r\n                    return <Carousel.Item key={ item.id }>\r\n                      <Movie id={ item.id } imgUrl={ `https://image.tmdb.org/t/p/w500${item.poster_path}` } movie={ item } />\r\n                    </Carousel.Item>\r\n                  })}\r\n                </Carousel>\r\n              </div>)\n              : <div className=\"RWD-L\"><NotFoundMessage>目前沒有資料</NotFoundMessage></div>}\r\n            {otherMovie.length !== 0\r\n              ? (<div className=\"RWD-S\">\r\n                <Carousel cols={ 2 } gap={ 10 }>\r\n                  {otherMovie && otherMovie.map((item) => {\r\n                    return <Carousel.Item key={ item.id }>\r\n                      <Movie id={ item.id } imgUrl={ `https://image.tmdb.org/t/p/w500${item.poster_path}` } movie={ item } />\r\n                    </Carousel.Item>\r\n                  })}\r\n                </Carousel>\r\n              </div>)\n              : <div className=\"RWD-S\"><NotFoundMessage>目前沒有資料</NotFoundMessage></div>}\r\n          </CarouselConatiner>\r\n        </FamousMovieSection>\r\n      </Wrapper>\r\n    </Container>\r\n  )\r\n}\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport {\r\n  getAuth,\r\n  signInWithEmailAndPassword,\r\n  setPersistence,\r\n  browserLocalPersistence\r\n} from 'firebase/auth'\r\nimport AuthContext from '../../context'\r\nimport { getUserDeviceType } from '../../utils'\r\n\r\nconst Container = styled.div`\r\n  color: white;\r\n  background-image: linear-gradient(rgba(28, 28, 28, 0.7), rgba(28, 28, 28, 0.7)), url('https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80');\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-itemsL center;\r\n  width: 100vw;\r\n  backdrop-filter: blur(10px);\r\n  position: relative;\r\n  input{\r\n    font-size: ${props => props.isMobileDevice ? 'initial' : ''}\r\n  }\r\n`\r\nconst LoginSection = styled.div`\r\n  background: rgba(0, 0, 0, 0.5);\r\n  border: 1px solid white;\r\n  min-width: 20%;\r\n  min-height: 20%;\r\n  padding: 5%;\r\n  position: absolute;\r\n  top:50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\r\n  font-size: 0.45rem;\r\n  h2{\r\n    font-size: 0.7rem;\r\n  }\r\n  a{\r\n    color: white;\r\n  }\r\n  input{\r\n    width: 70%;\r\n  }\r\n  input[type=\"password\"] {\r\n    margin-bottom: 5%;\r\n  }\r\n  @media (max-width: 415px) {\r\n    min-width: 80%;\r\n    padding: 60px 0;\r\n    h2{\r\n      font-size: 20px;\r\n    }\r\n    font-size: 16px;\r\n  }\r\n  \r\n`\r\nconst ErrorMessage = styled.p`\r\n  color: red;\r\n  font-weight: bold;\r\n`\r\nexport default function LoginPage () {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n  const { setUser } = useContext(AuthContext)\r\n  const history = useHistory()\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n  const handleLogin = () => {\r\n    const auth = getAuth()\r\n    setPersistence(auth, browserLocalPersistence)\r\n      .then(() => {\r\n        return signInWithEmailAndPassword(auth, username, password)\r\n          .then((userCredential) => {\r\n            const user = userCredential.user\r\n            setUser(user.auth.currentUser)\r\n            if (user) {\r\n              history.push('/')\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            const errorCode = error.code\r\n\r\n            if (errorCode === 'auth/wrong-password') {\r\n              setErrorMessage('密碼錯誤')\r\n            }\r\n            if (errorCode === 'auth/user-not-found') {\r\n              setErrorMessage('找不到用戶')\r\n            }\r\n          })\r\n      })\r\n      .catch((error) => {\r\n        return error\r\n      })\r\n  }\r\n  const handleKeyPressLogin = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleLogin()\r\n    }\r\n  }\r\n  return (\r\n    <Container isMobileDevice={ getUserDeviceType() }>\r\n      <LoginSection>\r\n        <h2>登入</h2>\r\n        <label>帳號：</label>\r\n        <input onChange={ (e) => { setUsername(e.target.value) } } onKeyPress={ (e) => { handleKeyPressLogin(e) } } placeholder=\"電郵\" type=\"email\" /><br />\r\n        <label>密碼：</label>\r\n        <input onChange={ (e) => { setPassword(e.target.value) } } onKeyPress={ (e) => { handleKeyPressLogin(e) } } placeholder=\"密碼\" type=\"password\" /><br />\r\n        <ErrorMessage>{errorMessage}</ErrorMessage>\r\n        <button onClick={ handleLogin }>登入</button><br />\r\n        <Link to=\"/register\">還沒有帳號嗎？點我註冊</Link>\r\n      </LoginSection>\r\n    </Container>\r\n  )\r\n}\r\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { getAuth, createUserWithEmailAndPassword, updateProfile } from 'firebase/auth'\r\nimport AuthContext from '../../context'\r\nimport { getUserDeviceType } from '../../utils'\r\n\r\nconst Container = styled.div`\r\n  color: white;\r\n  background-image: linear-gradient(rgba(28, 28, 28, 0.7), rgba(28, 28, 28, 0.7)), url('https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80');\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-itemsL center;\r\n  width: 100vw;\r\n  backdrop-filter: blur(10px);\r\n  position: relative;\r\n  input{\r\n    font-size: ${props => props.isMobileDevice ? 'initial' : ''}\r\n  }\r\n`\r\nconst LoginSection = styled.div`\r\n  background: rgba(0, 0, 0, 0.5);\r\n  border: 1px solid white;\r\n  min-width: 20%;\r\n  min-height: 20%;\r\n  padding: 5%;\r\n  position: absolute;\r\n  top:50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\r\n  font-size: 0.45rem;\r\n  h2{\r\n    font-size: 0.7rem;\r\n  }\r\n  a{\r\n    color: white;\r\n  }\r\n  input{\r\n    width: 70%;\r\n  }\r\n\r\n  @media (max-width: 415px) {\r\n    min-width: 80%;\r\n    padding: 60px 0;\r\n    h2{\r\n      font-size: 20px;\r\n    }\r\n    font-size: 16px;\r\n  }\r\n`\r\nconst ErrorMessage = styled.p`\r\n  color: red;\r\n  font-weight: bold;\r\n  padding: 5% 0;\r\n`\r\n\r\nexport default function RegisterPage () {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState('')\r\n  const [nickname, setNickname] = useState('')\r\n  const { setUser } = useContext(AuthContext)\r\n  const history = useHistory()\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n  const handleRegister = () => {\r\n    const auth = getAuth()\r\n    createUserWithEmailAndPassword(auth, username, password)\r\n      .then((userCredential) => {\r\n        // Signed in\r\n        const user = userCredential.user\r\n        updateProfile(auth.currentUser, {\r\n          displayName: nickname\r\n        }).then(() => {\r\n        }).catch((error) => {\r\n          return error\r\n        })\r\n        setUser(user.auth.currentUser)\r\n        if (user) {\r\n          history.push('/')\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        const errorCode = error.code\r\n        if (errorCode === 'auth/invalid-email') {\r\n          setErrorMessage('信箱格式錯誤')\r\n        }\r\n        if (errorCode === 'auth/internal-error') {\r\n          setErrorMessage('密碼格式錯誤')\r\n        }\r\n      })\r\n  }\r\n  const handleKeyPressRegister = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleRegister()\r\n    }\r\n  }\r\n  return (\r\n    <Container isMobileDevice={ getUserDeviceType() }>\r\n      <LoginSection>\r\n        <h2>註冊</h2>\r\n        <label>帳號：</label>\r\n        <input onChange={ (e) => { setUsername(e.target.value) } } onKeyPress={ (e) => { handleKeyPressRegister(e) } } placeholder=\"電郵\" type=\"email\" /><br />\r\n        <label>密碼：</label>\r\n        <input onChange={ (e) => { setPassword(e.target.value) } } onKeyPress={ (e) => { handleKeyPressRegister(e) } } placeholder=\"密碼\" type=\"password\" /><br />\r\n        <label>暱稱：</label>\r\n        <input onChange={ (e) => { setNickname(e.target.value) } } onKeyPress={ (e) => { handleKeyPressRegister(e) } } placeholder=\"請輸入暱稱\" type=\"text\" /><br />\r\n        <ErrorMessage>{errorMessage}</ErrorMessage>\r\n        <button onClick={ handleRegister }>註冊</button>\r\n      </LoginSection>\r\n    </Container>\r\n\r\n  )\r\n}\n","import React, { useEffect, useState, useContext } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { getAuth, updateProfile } from 'firebase/auth'\r\nimport {\r\n  getDatabase,\r\n  ref,\r\n  onValue,\r\n  query,\r\n  orderByChild,\r\n  equalTo\r\n} from 'firebase/database'\r\nimport { getMovieDeatil } from '../../WebAPI'\r\nimport AuthContext from '../../context'\r\nimport Movie from '../../components/Movie'\r\nimport Comment from '../../components/Comments'\r\nimport Loading from '../../components/Loading'\r\n\r\nconst Container = styled.div`\r\n  background: #1C1C1C;\r\n  padding-top: 120px;\r\n  color: white;\r\n  font-size: 0.5rem;\r\n`\r\nconst Wrapper = styled.div`\r\n  max-width: 60%;\r\n  margin: 0 auto;\r\n  .title{\r\n    padding-top: 5%;\r\n    padding-bottom: 5%;\r\n    font-size: 1.5rem;\r\n    text-align: left;\r\n    border-bottom: 1px solid white;\r\n  }\r\n  @media (max-width: 415px) {\r\n    max-width: 80%;\r\n    .title{\r\n      font-size: 20px;\r\n    }\r\n  }\r\n`\r\nconst MemberDetailSection = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 50% 50%;\r\n  border-bottom: 1px solid white;\r\n  @media (max-width: 415px) {\r\n    grid-template-columns: 30% 70%;\r\n  }\r\n`\r\nconst LeftContainer = styled.div`\r\n  font-size: 0.6rem;\r\n  p{\r\n    padding: 5% 0;\r\n  }\r\n  @media (max-width: 415px) {\r\n    font-size: 18px;\r\n  }\r\n`\r\nconst RightContainer = styled.div`\r\n  font-size: 0.45rem;\r\n  button{\r\n    margin-left: 1%;\r\n    font-size: 0.1rem;\r\n  }\r\n  .user-content{\r\n    padding: 5% 0;\r\n    line-height: 1.5;\r\n  }\r\n  @media (max-width: 415px) {\r\n    font-size: 14px;\r\n    button{\r\n      font-size: 14px;\r\n    }\r\n  }\r\n`\r\nconst FavoriteMovieSection = styled.div`\r\n  p{\r\n    font-size: 1rem;\r\n    padding: 5% 0;\r\n  }\r\n  border-bottom: 1px solid white;\r\n`\r\nconst FavoriteContainer = styled.div`\r\n.favorite-movie{\r\n  margin: 1%;\r\n  box-sizing: border-box;\r\n}\r\np{\r\n  font-size: 1rem;\r\n  padding: 5% 0;\r\n}\r\n.RWD-L{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  .favorite-movie{\r\n    width: 22%;\r\n    margin-right: 5px;\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n.RWD-S{\r\n  display: none;\r\n}\r\n margin-bottom: 5%;\r\n@media (max-width: 415px) {\r\n  .RWD-S{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    .favorite-movie{\r\n      width: 45%;\r\n    }\r\n  }\r\n  .RWD-L{\r\n    display: none;\r\n  }\r\n}\r\n\r\n`\r\nconst PhoneSection = styled.div`\r\n display: flex;\r\n justify-content: center;\r\n`\r\nconst PersonalCommentSection = styled.div`\r\n\r\n padding-bottom: 5%;\r\n min-width: 100%;\r\n\r\n`\r\nconst CommentSection = styled.div`\r\n\r\n  margin: 0 auto;\r\n`\r\nconst Pagination = styled.div`\r\n  margin-top: 5%;\r\n`\r\nconst Title = styled.p`\r\n  font-size: 1rem;\r\n  padding: 5% 0;\r\n`\r\nexport default function MemberPage () {\r\n  const [favoriteID, setFavoriteID] = useState([])\r\n  const [favoriteMovie, setFavoriteMovie] = useState([])\r\n  const [personalComments, setPersonalComments] = useState([])\r\n  const [isNicknameEdit, setIsNicknameEdit] = useState(false)\r\n  const [nicknameValue, setNicknameValue] = useState('')\r\n  const [currentCommentPage, setCurrentCommentPage] = useState(1)\r\n  const [totalCommentPage, settotalCommentPage] = useState(1)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const { user } = useContext(AuthContext)\r\n  const history = useHistory()\r\n  if (!user) {\r\n    history.push('/login')\r\n  }\r\n  useEffect(() => {\r\n    if (user) {\r\n      window.scrollTo(0, 0)\r\n      const db = getDatabase()\r\n      const memberFavoriteRef = ref(db, 'favorite/' + user.uid)\r\n      let keyArr = []\r\n      onValue(memberFavoriteRef, (snapshot) => {\r\n        const data = snapshot.val()\r\n        if (data) {\r\n          keyArr = Object.keys(data)\r\n          const arr = []\r\n          for (let i = 0; i < keyArr.length; i++) {\r\n            arr.push(keyArr[i])\r\n          }\r\n          setFavoriteID(arr)\r\n        }\n      })\r\n\r\n      const posts = query(ref(db, 'comments'), orderByChild('uid'), equalTo(user.uid))\r\n      // const posts = query(ref(db, 'comments'), orderByChild(\"created_at\"), limitToFirst(5))\r\n      onValue(posts, (snapshot) => {\r\n        const data = snapshot.val()\r\n        const arr = []\r\n        if (data) {\r\n          const keys = Object.keys(data)\r\n          const totalPage = Math.ceil(keys.length / 5)\r\n          settotalCommentPage(totalPage)\r\n          let len\r\n          if (keys.length >= 5) {\r\n            len = 5\r\n          } else {\r\n            len = keys.length\r\n          }\r\n          for (let i = 0; i < len; i++) {\r\n            arr.push(\r\n              {\r\n                ...data[keys[i]],\r\n                isHide: true,\r\n                id: keys[i]\r\n              }\r\n            )\r\n          }\r\n          setPersonalComments(arr.reverse())\r\n        }\r\n      })\r\n    }\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    async function fetchData () {\r\n      setIsLoading(true)\r\n      const arr = []\r\n      for (let i = 0; i < favoriteID.length; i++) {\r\n        await getMovieDeatil(favoriteID[i]).then((res) => {\r\n          arr.push(res)\r\n        })\r\n      }\r\n      setFavoriteMovie(arr)\r\n      setIsLoading(false)\r\n    }\r\n    fetchData()\r\n  }, [favoriteID])\r\n\r\n  const handleNicknameInputOpen = () => {\r\n    if (!isNicknameEdit) {\r\n      if (user.providerData[0].displayName) {\r\n        setNicknameValue(user.providerData[0].displayName)\r\n      } else {\r\n        setNicknameValue('')\r\n      }\n    }\r\n    setIsNicknameEdit(!isNicknameEdit)\r\n  }\r\n  const handleNicknameInputChange = (e) => {\r\n    setNicknameValue(e.target.value)\r\n  }\r\n  const handleNicknameSubmit = () => {\r\n    const auth = getAuth()\r\n    if (nicknameValue.trim() !== '') {\r\n      updateProfile(auth.currentUser, {\r\n        displayName: nicknameValue\r\n      }).then(() => {\r\n        setIsNicknameEdit(false)\r\n      }).catch((error) => {\r\n        return error\r\n      })\r\n    } else {\r\n      alert('暱稱不可為空白')\r\n    }\n  }\r\n  const handleCommentOpen = (id) => {\r\n    setPersonalComments(personalComments.map((item) => {\r\n      if (item.id !== id) return item\r\n      return {\r\n        ...item,\r\n        isHide: !item.isHide\r\n      }\r\n    }))\r\n  }\r\n  const handleCommentPage = (isNextPage) => {\r\n    const db = getDatabase()\r\n    const posts = query(ref(db, 'comments'), orderByChild('uid'), equalTo(user.uid))\r\n    if (isNextPage) {\r\n      onValue(posts, (snapshot) => {\r\n        const data = snapshot.val()\r\n        const arr = []\r\n        if (data) {\r\n          const keys = Object.keys(data)\r\n          let len\r\n          if (keys.length >= currentCommentPage * 5 + 4) {\r\n            len = currentCommentPage * 5 + 4\r\n          } else {\r\n            len = keys.length\r\n          }\r\n          for (let i = currentCommentPage * 5; i < len; i++) {\r\n            // if(data[keys[i]].created_at < personalComments[4]){\r\n            arr.push(\r\n              {\r\n                ...data[keys[i]],\r\n                isHide: true,\r\n                id: keys[i]\r\n              }\r\n            )\r\n            // }\n          }\r\n          setPersonalComments(arr.reverse())\r\n          setCurrentCommentPage(currentCommentPage + 1)\r\n        }\r\n      })\r\n    } else if (!isNextPage) {\r\n      onValue(posts, (snapshot) => {\r\n        const data = snapshot.val()\r\n        const arr = []\r\n        if (data) {\r\n          const keys = Object.keys(data)\r\n          let len\r\n          if (keys.length >= (currentCommentPage - 2) * 5 + 4) {\r\n            len = (currentCommentPage - 2) * 5 + 4\r\n          } else {\r\n            len = keys.length\r\n          }\r\n          for (let i = (currentCommentPage - 2) * 5; i < len; i++) {\r\n            // if(data[keys[i]].created_at < personalComments[4]){\r\n            arr.push(\r\n              {\r\n                ...data[keys[i]],\r\n                isHide: true,\r\n                id: keys[i]\r\n              }\r\n            )\r\n            // }\n          }\r\n          setPersonalComments(arr.reverse())\r\n          setCurrentCommentPage(currentCommentPage - 1)\r\n        }\r\n      })\r\n    }\n  }\r\n  return (\r\n    <Container>\r\n      <Loading isLoading={ isLoading } />\r\n      <Wrapper>\r\n        <h2 className=\"title\">帳戶</h2>\r\n        <MemberDetailSection>\r\n          <LeftContainer>\r\n            <p>會員資料</p>\r\n          </LeftContainer>\r\n          <RightContainer>\r\n            {user &&\r\n            <div className=\"user-content\">\r\n              <p>{user.email}</p>\r\n              <p>信箱驗證：{user.emailVerified ? '已驗證' : '尚未驗證'}</p>\r\n              <PhoneSection>\r\n                <p>暱稱：{!isNicknameEdit ? (user.providerData[0].displayName ? user.providerData[0].displayName : '尚未填寫') : false}</p>\r\n                {isNicknameEdit &&\r\n                <div>\r\n                  <input onChange={ (e) => { handleNicknameInputChange(e) } } type=\"text\" value={ nicknameValue } /><br />\r\n                  <button onClick={ handleNicknameSubmit }>確認</button>\r\n                  <button onClick={ handleNicknameInputOpen }>取消</button>\r\n                </div>\r\n\r\n              }\r\n                {!isNicknameEdit && <button onClick={ handleNicknameInputOpen }>修改</button>}\r\n              </PhoneSection>\r\n            </div>\r\n\r\n            }\r\n          </RightContainer>\r\n        </MemberDetailSection>\r\n        <FavoriteMovieSection>\r\n          <Title>喜歡影片</Title>\r\n          <FavoriteContainer>\r\n            <div className=\"RWD-L\">\r\n              {favoriteMovie.map((movie) => {\r\n                return <div className=\"favorite-movie\" key={ movie.id }><Movie id={ movie.id } imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` } isRating={ false } movie={ movie } /></div>\r\n              })}\r\n            </div>\r\n            <div className=\"RWD-S\">\r\n              {favoriteMovie.map((movie) => {\r\n                return <div className=\"favorite-movie\" key={ movie.id }><Movie id={ movie.id } imgUrl={ `https://image.tmdb.org/t/p/w500${movie.poster_path}` } isRating={ false } movie={ movie } /></div>\r\n              })}\r\n            </div>\r\n\r\n          </FavoriteContainer>\r\n        </FavoriteMovieSection>\r\n        <PersonalCommentSection>\r\n          <Title>歷史評論</Title>\r\n          <CommentSection>\r\n            {personalComments.length !== 0\n              ? personalComments.map((item) => {\r\n                return <Comment comment={ item } handleCommentOpen={ handleCommentOpen } isPosterOpen isThumbsUpOpen key={ item.id } />\r\n              })\n              : <p>還沒有任何評論</p>}\r\n          </CommentSection>\r\n          <Pagination>\r\n            {currentCommentPage !== 1 ? <button onClick={ () => { handleCommentPage(false) } }>&lt;</button> : false}\r\n            {currentCommentPage}\r\n            {totalCommentPage !== currentCommentPage ? <button onClick={ () => { handleCommentPage(true) } }>&gt;</button> : false}\r\n          </Pagination>\r\n        </PersonalCommentSection>\r\n      </Wrapper>\r\n\r\n    </Container>\r\n\r\n  )\r\n}\n","import React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  color: white;\r\n  background-image: linear-gradient(rgba(28, 28, 28, 0.7), rgba(28, 28, 28, 0.7)), url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1170&q=80');\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n\r\n  width: 100vw;\r\n  backdrop-filter: blur(10px);\r\n  padding: 0 0 5% 0;\r\n  @media (max-width: 415px) {\r\n    height: auto;\r\n    padding-bottom: 5%;\r\n    padding-top: 18%;\r\n  }\r\n`\r\nconst AboutSection = styled.div`\r\n  padding-top: 8%;\r\n  h2{\r\n    font-size: 1.3rem;\r\n    margin-bottom: 2%;\r\n  }\r\n  p{\r\n    font-size: 0.7rem;\r\n  }\r\n  @media (max-width: 415px) {\r\n    h2{\r\n      font-size: 3rem;\r\n    }\r\n    p{\r\n      font-size: 2rem;\r\n    }\r\n  }\r\n`\r\nconst LogoSection = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 30% 70%;\r\n  gap: 10%;\r\n  margin-bottom: 5%;\r\n  line-height: 1.5;\r\n  font-size: 0.5rem;\r\n  text-align: justify;\r\n  .IMDB, .tomato, .metacritic{\r\n    width: 100%;\r\n  }\r\n  .tomato, .metacritic{\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 10% 5%;\r\n    box-sizing: border-box;\r\n  }\r\n  @media (max-width: 415px) {\r\n    display: block;\r\n    font-size: 1.7rem;\r\n    margin-bottom: 20%;\r\n    text-align: center;\r\n    .IMDB, .tomato, .metacritic{\r\n\r\n      width: 35%;\r\n    }\r\n    .tomato, .metacritic{\r\n      padding: 5% 5%;\r\n    }\r\n  }\r\n`\r\nconst SubTitle = styled.p`\r\n  fon-size: 0.5rem;\r\n  @media (max-width: 415px) {\r\n    margin-top: 20%;\r\n  }\r\n`\r\nconst Wrapper = styled.div`\r\n  max-width: 50%;\r\n  margin: 0 auto;\r\n  margin-top: 5%;\r\n  ${SubTitle} {\r\n    margin-bottom: 5%;\r\n  }\r\n  @media (max-width: 415px) {\r\n    max-width: 80%;\r\n  }\r\n`\r\n\r\nexport default function AboutPage () {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n  return (\r\n    <Container>\r\n      <AboutSection>\r\n        <h2>About</h2>\r\n        <p>找評分，Fun電影</p>\r\n      </AboutSection>\r\n      <Wrapper>\r\n        <SubTitle>三大評分網，一次滿足</SubTitle>\r\n        <LogoSection>\r\n          <img alt=\"\" className=\"IMDB\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/69/IMDB_Logo_2016.svg\" />\r\n          <p>IMDb的用戶即可以以「1～10顆星」為電影評分，之後IMDb會以數據過濾機制及最小投票數量的限制（目前為1250票）來計算出一個加權平均星數作為評分。 因為IMDb以經常投票的用戶來計票，所以評分算是具客觀參考價值。</p>\r\n        </LogoSection>\r\n        <LogoSection>\r\n          <img alt=\"\" className=\"tomato\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/6f/Rotten_Tomatoes_logo.svg\" />\r\n          <p>爛番茄的工作人員會追蹤每一部影片的所有評論內容，然後使用使用整合資料的積分來運算，評論正面或負面的新鮮度。當超過60％，即會得到一個鮮紅的番茄作為標記，當低於60％，則會得到綠色被砸爛的番茄作為標記。</p>\r\n        </LogoSection>\r\n        <LogoSection>\r\n          <img alt=\"\" className=\"metacritic\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/48/Metacritic_logo.svg\" />\r\n          <p>Metacritic是一個專門收集對於電影、電視節目、音樂專輯、遊戲的評論的網站，網站會整合每個評價的分數再做出一個總評分作為這個項目的評分，在項目的多項短評中，從最好的分數到最壞的分數由下排列，最好的評價分數是綠色到最低的評價分數的黃色、紅色排列。</p>\r\n        </LogoSection>\r\n      </Wrapper>\r\n    </Container>\r\n\r\n  )\r\n}\r\n","const config = {\r\n  apiKey: 'AIzaSyAeGB1c7DrLqz2qCRxCeE5KLG01zFHJ7BE',\r\n  authDomain: 'movieproject-9c874.firebaseapp.com',\r\n  databaseURL: 'https://movieproject-9c874-default-rtdb.firebaseio.com',\r\n  projectId: 'movieproject-9c874',\r\n  storageBucket: 'movieproject-9c874.appspot.com',\r\n  messagingSenderId: '324525504042',\r\n  appId: '1:324525504042:web:5d72e2978e40cce4347553',\r\n  measurementId: 'G-FBP5RRRJM3'\r\n}\r\n\r\nexport default config\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCopyright } from '@fortawesome/free-regular-svg-icons'\r\nimport { faGithub, faFacebook, faInstagram, faTwitter, faYoutube } from '@fortawesome/free-brands-svg-icons'\r\n\r\nconst FooterContainer = styled.div`\r\n  background: #1C1C1C;\r\n  color: white;\r\n  padding: 40px 0;\r\n  padding-top: 10%;\r\n  font-size: 0.5rem;\r\n  @media (max-width: 415px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\nconst BrandSection = styled.div`\r\n  font-size: 1rem;\r\n  svg{\r\n    padding: 10px;\r\n  }\r\n  a{\r\n    color: white;\r\n  }\r\n  @media (max-width: 415px) {\r\n    font-size: 18px;\r\n  }\r\n`\r\n\r\nexport default function Footer () {\r\n  return (\r\n    <FooterContainer>\r\n      <BrandSection>\r\n        <a href=\"https://github.com/rj603295\" rel=\"noreferrer\" target=\"_blank\"><FontAwesomeIcon icon={ faGithub } /></a>\r\n        <a href=\"https://github.com/rj603295\" rel=\"noreferrer\" target=\"_blank\"><FontAwesomeIcon icon={ faFacebook } /></a>\r\n        <a href=\"https://github.com/rj603295\" rel=\"noreferrer\" target=\"_blank\"><FontAwesomeIcon icon={ faInstagram } /></a>\r\n        <a href=\"https://github.com/rj603295\" rel=\"noreferrer\" target=\"_blank\"><FontAwesomeIcon icon={ faTwitter } /></a>\r\n        <a href=\"https://github.com/rj603295\" rel=\"noreferrer\" target=\"_blank\"><FontAwesomeIcon icon={ faYoutube } /></a>\r\n      </BrandSection>\r\n      <FontAwesomeIcon icon={ faCopyright } /><span>  2021 - Moive Fun Inc.</span>\r\n    </FooterContainer>\r\n  )\r\n}\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport './style.css'\r\nimport Header from './components/Header'\r\nimport HomePage from './pages/HomePage'\r\nimport MovieDetailPage from './pages/MovieDetailPage'\r\nimport SearchGenrePage from './pages/SearchGenrePage'\r\nimport SearchPage from './pages/SearchPage'\r\nimport CreditPage from './pages/CreditPage'\r\nimport LoginPage from './pages/LoginPage'\r\nimport RegisterPage from './pages/RegisterPage'\r\nimport MemberPage from './pages/MemberPage'\r\nimport AboutPage from './pages/AboutPage'\r\nimport config from './config'\r\nimport { initializeApp } from 'firebase/app'\r\nimport { getDatabase, ref, onValue } from 'firebase/database'\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth'\r\nimport AuthContext from './context'\r\nimport Footer from './components/Footer'\r\n\r\nfunction App () {\r\n  const [user, setUser] = useState(null)\r\n  const [isHide, setIsHide] = useState(false)\r\n  const [userFavorite, setUserFavorite] = useState({})\r\n  let lastScrollY = useRef(0)\r\n  // const app = initializeApp(config);\r\n  initializeApp(config)\r\n  const db = getDatabase()\r\n\r\n  const auth = getAuth()\r\n  onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n      setUser(user.auth.currentUser)\r\n    }\r\n  })\r\n\r\n  const handleScroll = () => {\r\n    const st = window.scrollY // 目前距離頂部位置\r\n    if (st < lastScrollY) {\r\n      setIsHide(false)\r\n    } else if (st > lastScrollY) {\r\n      setIsHide(true)\r\n    }\r\n    lastScrollY = st\r\n  }\r\n\r\n  window.addEventListener('scroll', () => {\r\n    handleScroll()\r\n  })\r\n\r\n  useEffect(() => {\r\n    function getFavorite () {\r\n      const movieRef = ref(db, 'favorite/' + user.uid)\r\n      onValue(movieRef, (snapshot) => {\r\n        const data = snapshot.val()\r\n        setUserFavorite(data)\r\n      })\r\n    }\r\n\r\n    if (user) {\r\n      getFavorite()\r\n    }\r\n  }, [user])\r\n  return (\r\n    <AuthContext.Provider value={ {\r\n      user,\r\n      setUser,\r\n      userFavorite\r\n    } }\n    >\r\n      <div className=\"App\">\r\n        <Router>\r\n          <Header className=\"header\" isHide={ isHide } />\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <HomePage />\r\n            </Route>\r\n            <Route exact path=\"/movie/:id\">\r\n              <MovieDetailPage />\r\n            </Route>\r\n            <Route exact path=\"/search/genre/:id\">\r\n              <SearchGenrePage />\r\n            </Route>\r\n            <Route exact path=\"/search/movie/:query\">\r\n              <SearchPage />\r\n            </Route>\r\n            <Route exact path=\"/credit/:id\">\r\n              <CreditPage />\r\n            </Route>\r\n            <Route exact path=\"/login\">\r\n              {!user ? <LoginPage /> : <Redirect to=\"/\" />}\r\n            </Route>\r\n            <Route exact path=\"/register\">\r\n              <RegisterPage />\r\n            </Route>\r\n            <Route exact path=\"/member\">\r\n              <MemberPage />\r\n            </Route>\r\n            <Route exact path=\"/about\">\r\n              <AboutPage />\r\n            </Route>\r\n          </Switch>\r\n          <Footer />\r\n        </Router>\r\n      </div>\r\n    </AuthContext.Provider>\r\n\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport SimpleReactLightbox from 'simple-react-lightbox'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <SimpleReactLightbox>\r\n      <App />\r\n    </SimpleReactLightbox>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}